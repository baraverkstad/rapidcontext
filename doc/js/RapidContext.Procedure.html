<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="JsDoc" />
    <link rel="stylesheet" href="../css/style.css" type="text/css">
    <link rel="stylesheet" href="../css/doc.css" type="text/css">
    <link rel="stylesheet" href="../css/font-awesome-4.7.0.min.css" type="text/css">
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../images/logotype-icon.ico">
    <link rel="icon" type="image/png" sizes="256x256" href="../images/logotype-icon-256x256.png">
    <link rel="apple-touch-icon" sizes="256x256" href="../images/logotype-icon-256x256.png">
    <title>RapidContext :: JavaScript API</title>
  </head>
  <body class="doc">

    <section class="header">
      <div class="center">
        <a href="https://www.rapidcontext.com/" class="logotype">
          <img src="../images/logotype.png" />
        </a>
        <div class="text">
          <a href="https://www.rapidcontext.com/">
            <span style="font-size: 3.6em;">RapidContext</span><br>
            <span style="font-size: 1.75em; color: #caf3ff;">Access &#183; Discovery &#183; Insight</span><br>
            <span style="font-size: 1.3em; letter-spacing: 0.34em; line-height: 1.8em;">www.rapidcontext.com</span>
          </a>
        </div>
      </div>
      <div class="menu">
        <a href="https://www.rapidcontext.com/doc/index.html">Docs</a>
        &bull; <a href="https://github.com/cederberg/rapidcontext/releases">Downloads</a>
        &bull; <a href="https://github.com/cederberg/rapidcontext">Project</a>
      </div>
    </section>

    <section class="content center">
      <ol class="breadcrumb">
        <li><a href="../index.html">Documentation</a></li>

        <li><a href="index.html">JavaScript API</a></li>
        <li class="active">RapidContext.Procedure</li>

      </ol>

      <div class="jsdoc">
        <h1 class="classTitle">Class RapidContext.Procedure</h1>




<header>

        <h2><span class="attribs"><span class="type-signature"></span></span>Procedure<span class="signature">(procedure)</span><span class="type-signature"></span></h2>

            <div class="class-description"><p>The procedure wrapper function. Used to provide a simplified way of
  calling a procedure and connecting results through signals (instead of
  using promise callbacks).</p>

<p>  The actual calls are performed with normal function calls, but the results
  are asynchronous. When called, the procedure function returns a
  <code>RapidContext.Async</code> promise (as the normal API call), but the results
  will also be signalled through the <code>onsuccess</code> signal.</p>

<p>  Differing from normal functions, a procedure function will also ensure
  that only a single call is in progress at any time, automatically
  cancelling any previous call if needed.</p></div>




    <table class="summary-table">
        <caption>Constructor Summary</caption>
        <tbody>
            <tr>
                <td class="attributes"></td>
                <td class="name-description">
                    <div><code><a href="#Procedure"><span class="type-signature"></span><span class="type-prefix">new</span> Procedure<span class="signature">(procedure)</span><span class="type-signature"></span></a></code></div>
                    <div class="description">Creates a new procedure caller function.</div>
                </td>
            </tr>
        </tbody>
    </table>





        <table class="summary-table">
            <caption>Method Summary</caption>
            <tbody>

                <tr>
                    <td class="attributes">
                        <span class="type-signature"></span>
                    </td>
                    <td class="name-description">
                        <div >
                            <code><a href="#cancel">cancel<span class="signature">()</span><span class="type-signature"></span></a></code>
                        </div>
                        <div class="description">Cancels any current execution of this procedure.</div>
                    </td>
                </tr>

                <tr>
                    <td class="attributes">
                        <span class="type-signature"></span>
                    </td>
                    <td class="name-description">
                        <div >
                            <code><a href="#multicall">multicall<span class="signature">(args, transform<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Promise}</span></a></code>
                        </div>
                        <div class="description">Calls the procedure multiple times (in sequence) with different arguments
(supplied as an array of argument arrays).</div>
                    </td>
                </tr>

                <tr>
                    <td class="attributes">
                        <span class="type-signature"></span>
                    </td>
                    <td class="name-description">
                        <div >
                            <code><a href="#recall">recall<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></a></code>
                        </div>
                        <div class="description">Calls the procedure with the same arguments as used in the last call.</div>
                    </td>
                </tr>

                <tr>
                    <td class="attributes">
                        <span class="type-signature"></span>
                    </td>
                    <td class="name-description">
                        <div >
                            <code><a href="#reset">reset<span class="signature">()</span><span class="type-signature"></span></a></code>
                        </div>
                        <div class="description">Cancels any current execution and removes the reference to the arguments of
this procedure.</div>
                    </td>
                </tr>

                <tr>
                    <td class="attributes">
                        <span class="type-signature">(static) </span>
                    </td>
                    <td class="name-description">
                        <div >
                            <code><a href="#.mapAll">mapAll<span class="signature">(obj)</span><span class="type-signature"> &rarr; {Object}</span></a></code>
                        </div>
                        <div class="description">Creates a new procedure caller for each key-value-pair in the specified
object.</div>
                    </td>
                </tr>

            </tbody>
        </table>



        <table class="summary-table">
            <caption>Event Summary</caption>
            <tbody>

                <tr>
                    <td class="attributes">

                    </td>
                    <td class="name-description">
                        <div >

                            <code><a href="#event:oncall"><span class="type-prefix">on</span>call</a></code>
                        </div>
                        <div class="description">Emitted when the procedure is called.</div>
                    </td>
                </tr>

                <tr>
                    <td class="attributes">

                    </td>
                    <td class="name-description">
                        <div >

                            <code><a href="#event:oncancel"><span class="type-prefix">on</span>cancel</a></code>
                        </div>
                        <div class="description">Emitted when a procedure call was cancelled.</div>
                    </td>
                </tr>

                <tr>
                    <td class="attributes">

                    </td>
                    <td class="name-description">
                        <div >

                            <code><a href="#event:onerror"><span class="type-prefix">on</span>error</a></code>
                        </div>
                        <div class="description">Emitted when a procedure call failed.</div>
                    </td>
                </tr>

                <tr>
                    <td class="attributes">

                    </td>
                    <td class="name-description">
                        <div >

                            <code><a href="#event:onresponse"><span class="type-prefix">on</span>response</a></code>
                        </div>
                        <div class="description">Emitted when the procedure response has been received.</div>
                    </td>
                </tr>

                <tr>
                    <td class="attributes">

                    </td>
                    <td class="name-description">
                        <div >

                            <code><a href="#event:onsuccess"><span class="type-prefix">on</span>success</a></code>
                        </div>
                        <div class="description">Emitted when a procedure call returned a result.</div>
                    </td>
                </tr>

                <tr>
                    <td class="attributes">

                    </td>
                    <td class="name-description">
                        <div >

                            <code><a href="#event:onupdate"><span class="type-prefix">on</span>update</a></code>
                        </div>
                        <div class="description">Emitted if a partial procedure result is available.</div>
                    </td>
                </tr>

            </tbody>
        </table>



</header>

<article>
    <div class="container-overview">




    <h2 class="section-title">Constructor</h2>


    <h4 class="name" id="Procedure">
        <span class="type-signature"></span><span class="type-prefix">new</span> Procedure<span class="signature">(procedure)</span><span class="type-signature"></span>
    </h4>





<div class="description">
    <p>Creates a new procedure caller function. This function can be called either
as a constructor or as a plain function. In both cases it returns a new
JavaScript function with additional methods.</p>
</div>




<dl class="details">







    <dt class="tag-props">Properties:</dt>
    <dd class="tag-props">


<table class="props">
    <thead>
    <tr>

        <th>Name</th>


        <th>Type</th>





        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>


        <tr>

                <td class="name"><code>procedure</code></td>


            <td class="type">


    <span class="param-type">{<b>string</b>}</span>


            </td>





            <td class="description last">
                The procedure name.

            </td>
        </tr>



        <tr>

                <td class="name"><code>args</code></td>


            <td class="type">


    <span class="param-type">{<b>Array</b>}</span>


            </td>





            <td class="description last">
                The arguments used in the last call.

            </td>
        </tr>


    </tbody>
</table>

    </dd>



    <dt class="tag-params">Parameters:</dt>
    <dd class="tag-params">


<table class="params">
    <thead>
    <tr>

        <th>Name</th>


        <th>Type</th>





        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>


        <tr>

                <td class="name"><code>procedure</code></td>


            <td class="type">


    <span class="param-type">{<b>string</b>}</span>


            </td>





            <td class="description last">
                the procedure name

            </td>
        </tr>


    </tbody>
</table>

    </dd>



















































    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
        <a href="RapidContext_Procedure.js.html">RapidContext_Procedure.js</a>, <a href="RapidContext_Procedure.js.html#line17">line 17</a>
    </dd>

</dl>



    </div>












        <h3 class="section-title">Methods</h3>





    <h4 class="name" id="cancel">
        <span class="type-signature"></span>cancel<span class="signature">()</span><span class="type-signature"></span>
    </h4>





<div class="description">
    <p>Cancels any current execution of this procedure. This method does nothing if
no procedure call was currently executing.</p>
</div>




<dl class="details">









    <dt class="tag-params">Parameters:</dt>
    <dd class="tag-params">


<table class="params">
    <thead>
    <tr>


        <th>Type</th>





        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>

    </tbody>
</table>

    </dd>



















































    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
        <a href="RapidContext_Procedure.js.html">RapidContext_Procedure.js</a>, <a href="RapidContext_Procedure.js.html#line222">line 222</a>
    </dd>

</dl>







    <h4 class="name" id="multicall">
        <span class="type-signature"></span>multicall<span class="signature">(args, transform<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Promise}</span>
    </h4>





<div class="description">
    <p>Calls the procedure multiple times (in sequence) with different arguments
(supplied as an array of argument arrays). The calls are asynchronous, so
results will not be returned by this method. Instead an array with the
results will be available through the <code>onupdate</code> and <code>onsuccess</code> signals,
for example.</p>

<p>Note that any previously running call will automatically be cancelled, since
only a single call can be processed at any time. A result <code>transform</code>
function can be supplied to transform each individual result. If the
<code>transform</code> function throws an error, that result will be omitted.</p>
</div>




<dl class="details">









    <dt class="tag-params">Parameters:</dt>
    <dd class="tag-params">


<table class="params">
    <thead>
    <tr>

        <th>Name</th>


        <th>Type</th>


        <th>Attributes</th>




        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>


        <tr>

                <td class="name"><code>args</code></td>


            <td class="type">


    <span class="param-type">{<b>Array</b>}</span>


            </td>


                <td class="attributes">





                </td>




            <td class="description last">
                the array of argument arrays

            </td>
        </tr>



        <tr>

                <td class="name"><code>transform</code></td>


            <td class="type">


    <span class="param-type">{<b>function</b>}</span>


            </td>


                <td class="attributes">

                    &lt;optional><br>





                </td>




            <td class="description last">
                the optional result transform function

            </td>
        </tr>


    </tbody>
</table>

    </dd>



    <dt class="tag-returns">Returns:</dt>
    <dd class="tag-returns">


    <span class="param-type">{<b>Promise</b>}</span>

    a <code>RapidContext.Async</code> promise that will resolve with
        the response data or error

    </dd>

















































    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
        <a href="RapidContext_Procedure.js.html">RapidContext_Procedure.js</a>, <a href="RapidContext_Procedure.js.html#line172">line 172</a>
    </dd>

</dl>







    <h4 class="name" id="recall">
        <span class="type-signature"></span>recall<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span>
    </h4>





<div class="description">
    <p>Calls the procedure with the same arguments as used in the last call. The
call is asynchronous, so results will not be returned by this method.
Instead the results will be available through the <code>onsuccess</code> signal, for
example.</p>

<p>Note that any previously running call will automatically be cancelled, since
only a single call can be processed at any time.</p>
</div>




<dl class="details">









    <dt class="tag-params">Parameters:</dt>
    <dd class="tag-params">


<table class="params">
    <thead>
    <tr>


        <th>Type</th>





        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>

    </tbody>
</table>

    </dd>



    <dt class="tag-returns">Returns:</dt>
    <dd class="tag-returns">


    <span class="param-type">{<b>Promise</b>}</span>

    a <code>RapidContext.Async</code> promise that will resolve with
        the response data or error

    </dd>

















































    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
        <a href="RapidContext_Procedure.js.html">RapidContext_Procedure.js</a>, <a href="RapidContext_Procedure.js.html#line129">line 129</a>
    </dd>

</dl>







    <h4 class="name" id="reset">
        <span class="type-signature"></span>reset<span class="signature">()</span><span class="type-signature"></span>
    </h4>





<div class="description">
    <p>Cancels any current execution and removes the reference to the arguments of
this procedure.</p>
</div>




<dl class="details">









    <dt class="tag-params">Parameters:</dt>
    <dd class="tag-params">


<table class="params">
    <thead>
    <tr>


        <th>Type</th>





        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>

    </tbody>
</table>

    </dd>



















































    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
        <a href="RapidContext_Procedure.js.html">RapidContext_Procedure.js</a>, <a href="RapidContext_Procedure.js.html#line238">line 238</a>
    </dd>

</dl>







    <h4 class="name" id=".mapAll">
        <span class="type-signature">(static) </span>mapAll<span class="signature">(obj)</span><span class="type-signature"> &rarr; {Object}</span>
    </h4>





<div class="description">
    <p>Creates a new procedure caller for each key-value-pair in the specified
object.</p>
</div>




<dl class="details">









    <dt class="tag-params">Parameters:</dt>
    <dd class="tag-params">


<table class="params">
    <thead>
    <tr>

        <th>Name</th>


        <th>Type</th>





        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>


        <tr>

                <td class="name"><code>obj</code></td>


            <td class="type">


    <span class="param-type">{<b>Object</b>}</span>


            </td>





            <td class="description last">
                an object mapping keys to procedure names

            </td>
        </tr>


    </tbody>
</table>

    </dd>



    <dt class="tag-returns">Returns:</dt>
    <dd class="tag-returns">


    <span class="param-type">{<b>Object</b>}</span>

    an object mapping keys to procedure instances

    </dd>

















































    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
        <a href="RapidContext_Procedure.js.html">RapidContext_Procedure.js</a>, <a href="RapidContext_Procedure.js.html#line251">line 251</a>
    </dd>

</dl>








        <h3 class="section-title">Events</h3>






    <h4 class="name" id="event:oncall">
        <span class="type-prefix">on</span>call
    </h4>





<div class="description">
    <p>Emitted when the procedure is called. Each call corresponds to exactly one
<code>oncall</code> and one <code>onresponse</code> event (even if the call was cancelled). No
event data will be sent.</p>
</div>




<dl class="details">



























































    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
        <a href="RapidContext_Procedure.js.html">RapidContext_Procedure.js</a>, <a href="RapidContext_Procedure.js.html#line57">line 57</a>
    </dd>

</dl>







    <h4 class="name" id="event:oncancel">
        <span class="type-prefix">on</span>cancel
    </h4>





<div class="description">
    <p>Emitted when a procedure call was cancelled. This event is emitted after the
<code>onresponse</code> event, but only if the procedure call was cancelled. Use the
<code>onsuccess</code> or <code>onerror</code> for other result statuses. No event data will be
sent.</p>
</div>




<dl class="details">



























































    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
        <a href="RapidContext_Procedure.js.html">RapidContext_Procedure.js</a>, <a href="RapidContext_Procedure.js.html#line106">line 106</a>
    </dd>

</dl>







    <h4 class="name" id="event:onerror">
        <span class="type-prefix">on</span>error
    </h4>





<div class="description">
    <p>Emitted when a procedure call failed. This event is emitted after the
<code>onresponse</code> event, but only if the procedure call returned an error. Use
the <code>onsuccess</code> or <code>oncancel</code> for other result statuses. The call error
object will be sent as the event data.</p>
</div>




<dl class="details">



























































    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
        <a href="RapidContext_Procedure.js.html">RapidContext_Procedure.js</a>, <a href="RapidContext_Procedure.js.html#line96">line 96</a>
    </dd>

</dl>







    <h4 class="name" id="event:onresponse">
        <span class="type-prefix">on</span>response
    </h4>





<div class="description">
    <p>Emitted when the procedure response has been received. Each call corresponds
to exactly one <code>oncall</code> and one <code>onresponse</code> event (even if the call was
cancelled). The call response or error object will be sent as the event
data.</p>
</div>




<dl class="details">



























































    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
        <a href="RapidContext_Procedure.js.html">RapidContext_Procedure.js</a>, <a href="RapidContext_Procedure.js.html#line76">line 76</a>
    </dd>

</dl>







    <h4 class="name" id="event:onsuccess">
        <span class="type-prefix">on</span>success
    </h4>





<div class="description">
    <p>Emitted when a procedure call returned a result. This event is emitted after
the <code>onresponse</code> event, but only if the procedure call actually succeeded.
Use the <code>onerror</code> or <code>oncancel</code> signals for other result statuses. The call
response object will be sent as the event data.</p>
</div>




<dl class="details">



























































    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
        <a href="RapidContext_Procedure.js.html">RapidContext_Procedure.js</a>, <a href="RapidContext_Procedure.js.html#line86">line 86</a>
    </dd>

</dl>







    <h4 class="name" id="event:onupdate">
        <span class="type-prefix">on</span>update
    </h4>





<div class="description">
    <p>Emitted if a partial procedure result is available. This event will only be
emitted when performing a multi-call, along with the <code>oncall</code> and
<code>onresponse</code> events (for each call). The partial procedure result will be
sent as the event data.</p>
</div>




<dl class="details">



























































    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
        <a href="RapidContext_Procedure.js.html">RapidContext_Procedure.js</a>, <a href="RapidContext_Procedure.js.html#line66">line 66</a>
    </dd>

</dl>




</article>





      </div>
    </section>

    <section class="footer center fineprint">
      <hr>
      Copyright &copy; 2007-2023 Per Cederberg. All rights reserved.
    </section>

  </body>
</html>