
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="JsDoc" />
    <link rel="stylesheet" href="../css/style.css" type="text/css">
    <link rel="stylesheet" href="../css/doc.css" type="text/css">
    <link rel="stylesheet" href="../css/font-awesome-4.7.0.min.css" type="text/css">
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../images/logotype-icon.ico">
    <link rel="icon" type="image/png" sizes="256x256" href="../images/logotype-icon-256x256.png">
    <link rel="apple-touch-icon" sizes="256x256" href="../images/logotype-icon-256x256.png">
    <title>RapidContext :: JavaScript API</title>
  </head>
  <body class="doc">

    <section class="header">
      <div class="center">
        <a href="https://www.rapidcontext.com/" class="logotype">
          <img src="../images/logotype.png" />
        </a>
        <div class="text">
          <a href="https://www.rapidcontext.com/">
            <span style="font-size: 3.6em;">RapidContext</span><br>
            <span style="font-size: 1.75em; color: #caf3ff;">Access &#183; Discovery &#183; Insight</span><br>
            <span style="font-size: 1.3em; letter-spacing: 0.34em; line-height: 1.8em;">www.rapidcontext.com</span>
          </a>
        </div>
      </div>
      <div class="menu">
        <a href="https://www.rapidcontext.com/doc/index.html">Docs</a>
        &bull; <a href="https://github.com/cederberg/rapidcontext/releases">Downloads</a>
        &bull; <a href="https://github.com/cederberg/rapidcontext">Project</a>
      </div>
    </section>

    <section class="content center">
      <ol class="breadcrumb">
        <li><a href="../index.html">Documentation</a></li>

        <li><a href="index.html">JavaScript API</a></li>
        <li class="active">RapidContext_Browser.js</li>

      </ol>

      <div class="jsdoc">
        <h1 class="classTitle">Source RapidContext_Browser.js</h1>




    <section>
        <article>
            <pre><code class="hljs language-js"><span id="line1" class="lineno">1</span><span class="hljs-comment">/*
<span id="line2" class="lineno">2</span> * RapidContext &lt;https://www.rapidcontext.com/&gt;
<span id="line3" class="lineno">3</span> * Copyright (c) 2007-2023 Per Cederberg. All rights reserved.
<span id="line4" class="lineno">4</span> *
<span id="line5" class="lineno">5</span> * This program is free software: you can redistribute it and/or
<span id="line6" class="lineno">6</span> * modify it under the terms of the BSD license.
<span id="line7" class="lineno">7</span> *
<span id="line8" class="lineno">8</span> * This program is distributed in the hope that it will be useful,
<span id="line9" class="lineno">9</span> * but WITHOUT ANY WARRANTY; without even the implied warranty of
<span id="line10" class="lineno">10</span> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
<span id="line11" class="lineno">11</span> *
<span id="line12" class="lineno">12</span> * See the RapidContext LICENSE for more details.
<span id="line13" class="lineno">13</span> */</span>
<span id="line14" class="lineno">14</span>
<span id="line15" class="lineno">15</span><span class="hljs-comment">/**
<span id="line16" class="lineno">16</span> * Provides a browser compatibility and diagnostics information.
<span id="line17" class="lineno">17</span> * <span class="hljs-doctag">@namespace</span> RapidContext.Browser
<span id="line18" class="lineno">18</span> */</span>
<span id="line19" class="lineno">19</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-variable language_">window</span></span>) {
<span id="line20" class="lineno">20</span>
<span id="line21" class="lineno">21</span>    <span class="hljs-comment">/**
<span id="line22" class="lineno">22</span>     * List of all required browser features.
<span id="line23" class="lineno">23</span>     *
<span id="line24" class="lineno">24</span>     * <span class="hljs-doctag">@name</span> <span class="hljs-variable">REQUIRED</span>
<span id="line25" class="lineno">25</span>     * <span class="hljs-doctag">@memberof</span> RapidContext.Browser
<span id="line26" class="lineno">26</span>     * <span class="hljs-doctag">@constant</span>
<span id="line27" class="lineno">27</span>     */</span>
<span id="line28" class="lineno">28</span>    <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">REQUIRED</span> = [
<span id="line29" class="lineno">29</span>        <span class="hljs-string">&quot;Array.isArray&quot;</span>,
<span id="line30" class="lineno">30</span>        <span class="hljs-string">&quot;Array.from&quot;</span>,
<span id="line31" class="lineno">31</span>        <span class="hljs-string">&quot;Array.of&quot;</span>,
<span id="line32" class="lineno">32</span>        <span class="hljs-string">&quot;Array.prototype.every&quot;</span>,
<span id="line33" class="lineno">33</span>        <span class="hljs-string">&quot;Array.prototype.filter&quot;</span>,
<span id="line34" class="lineno">34</span>        <span class="hljs-string">&quot;Array.prototype.find&quot;</span>,
<span id="line35" class="lineno">35</span>        <span class="hljs-string">&quot;Array.prototype.findIndex&quot;</span>,
<span id="line36" class="lineno">36</span>        <span class="hljs-string">&quot;Array.prototype.forEach&quot;</span>,
<span id="line37" class="lineno">37</span>        <span class="hljs-string">&quot;Array.prototype.includes&quot;</span>,
<span id="line38" class="lineno">38</span>        <span class="hljs-string">&quot;Array.prototype.map&quot;</span>,
<span id="line39" class="lineno">39</span>        <span class="hljs-string">&quot;Array.prototype.reduce&quot;</span>,
<span id="line40" class="lineno">40</span>        <span class="hljs-string">&quot;Array.prototype.some&quot;</span>,
<span id="line41" class="lineno">41</span>        <span class="hljs-string">&quot;Blob&quot;</span>,
<span id="line42" class="lineno">42</span>        <span class="hljs-string">&quot;CSS.supports&quot;</span>,
<span id="line43" class="lineno">43</span>        <span class="hljs-string">&quot;CustomEvent&quot;</span>,
<span id="line44" class="lineno">44</span>        <span class="hljs-string">&quot;Date.now&quot;</span>,
<span id="line45" class="lineno">45</span>        <span class="hljs-string">&quot;Date.prototype.toISOString&quot;</span>,
<span id="line46" class="lineno">46</span>        <span class="hljs-string">&quot;Date.prototype.toLocaleString&quot;</span>,
<span id="line47" class="lineno">47</span>        <span class="hljs-string">&quot;DOMParser&quot;</span>,
<span id="line48" class="lineno">48</span>        <span class="hljs-string">&quot;DOMTokenList.prototype.add&quot;</span>,
<span id="line49" class="lineno">49</span>        <span class="hljs-string">&quot;DOMTokenList.prototype.remove&quot;</span>,
<span id="line50" class="lineno">50</span>        <span class="hljs-string">&quot;DOMTokenList.prototype.toggle&quot;</span>,
<span id="line51" class="lineno">51</span>        <span class="hljs-string">&quot;Element.prototype.after&quot;</span>,
<span id="line52" class="lineno">52</span>        <span class="hljs-string">&quot;Element.prototype.append&quot;</span>,
<span id="line53" class="lineno">53</span>        <span class="hljs-string">&quot;Element.prototype.before&quot;</span>,
<span id="line54" class="lineno">54</span>        <span class="hljs-string">&quot;Element.prototype.closest&quot;</span>,
<span id="line55" class="lineno">55</span>        <span class="hljs-string">&quot;Element.prototype.matches&quot;</span>,
<span id="line56" class="lineno">56</span>        <span class="hljs-string">&quot;Element.prototype.prepend&quot;</span>,
<span id="line57" class="lineno">57</span>        <span class="hljs-string">&quot;Element.prototype.remove&quot;</span>,
<span id="line58" class="lineno">58</span>        <span class="hljs-string">&quot;Element.prototype.replaceWith&quot;</span>,
<span id="line59" class="lineno">59</span>        <span class="hljs-string">&quot;FileReader&quot;</span>,
<span id="line60" class="lineno">60</span>        <span class="hljs-string">&quot;FormData&quot;</span>,
<span id="line61" class="lineno">61</span>        <span class="hljs-string">&quot;Function.prototype.bind&quot;</span>,
<span id="line62" class="lineno">62</span>        <span class="hljs-string">&quot;HTMLTemplateElement&quot;</span>,
<span id="line63" class="lineno">63</span>        <span class="hljs-string">&quot;HTMLSlotElement&quot;</span>,
<span id="line64" class="lineno">64</span>        <span class="hljs-string">&quot;JSON.parse&quot;</span>,
<span id="line65" class="lineno">65</span>        <span class="hljs-string">&quot;JSON.stringify&quot;</span>,
<span id="line66" class="lineno">66</span>        <span class="hljs-string">&quot;Math.imul&quot;</span>,
<span id="line67" class="lineno">67</span>        <span class="hljs-string">&quot;NodeList.prototype.forEach&quot;</span>,
<span id="line68" class="lineno">68</span>        <span class="hljs-string">&quot;Number.prototype.toLocaleString&quot;</span>,
<span id="line69" class="lineno">69</span>        <span class="hljs-string">&quot;Object.assign&quot;</span>,
<span id="line70" class="lineno">70</span>        <span class="hljs-string">&quot;Object.create&quot;</span>,
<span id="line71" class="lineno">71</span>        <span class="hljs-string">&quot;Object.defineProperty&quot;</span>,
<span id="line72" class="lineno">72</span>        <span class="hljs-string">&quot;Object.entries&quot;</span>,
<span id="line73" class="lineno">73</span>        <span class="hljs-string">&quot;Object.getOwnPropertyDescriptor&quot;</span>,
<span id="line74" class="lineno">74</span>        <span class="hljs-string">&quot;Object.getOwnPropertyNames&quot;</span>,
<span id="line75" class="lineno">75</span>        <span class="hljs-string">&quot;Object.getPrototypeOf&quot;</span>,
<span id="line76" class="lineno">76</span>        <span class="hljs-string">&quot;Object.is&quot;</span>,
<span id="line77" class="lineno">77</span>        <span class="hljs-string">&quot;Object.keys&quot;</span>,
<span id="line78" class="lineno">78</span>        <span class="hljs-string">&quot;Object.setPrototypeOf&quot;</span>,
<span id="line79" class="lineno">79</span>        <span class="hljs-string">&quot;Object.values&quot;</span>,
<span id="line80" class="lineno">80</span>        <span class="hljs-string">&quot;Promise&quot;</span>,
<span id="line81" class="lineno">81</span>        <span class="hljs-string">&quot;Promise.all&quot;</span>,
<span id="line82" class="lineno">82</span>        <span class="hljs-string">&quot;Promise.race&quot;</span>,
<span id="line83" class="lineno">83</span>        <span class="hljs-string">&quot;Promise.reject&quot;</span>,
<span id="line84" class="lineno">84</span>        <span class="hljs-string">&quot;Promise.resolve&quot;</span>,
<span id="line85" class="lineno">85</span>        <span class="hljs-string">&quot;Promise.prototype.finally&quot;</span>,
<span id="line86" class="lineno">86</span>        <span class="hljs-string">&quot;Set&quot;</span>,
<span id="line87" class="lineno">87</span>        <span class="hljs-string">&quot;String.prototype.endsWith&quot;</span>,
<span id="line88" class="lineno">88</span>        <span class="hljs-string">&quot;String.prototype.includes&quot;</span>,
<span id="line89" class="lineno">89</span>        <span class="hljs-string">&quot;String.prototype.padEnd&quot;</span>,
<span id="line90" class="lineno">90</span>        <span class="hljs-string">&quot;String.prototype.padStart&quot;</span>,
<span id="line91" class="lineno">91</span>        <span class="hljs-string">&quot;String.prototype.startsWith&quot;</span>,
<span id="line92" class="lineno">92</span>        <span class="hljs-string">&quot;String.prototype.trim&quot;</span>,
<span id="line93" class="lineno">93</span>        <span class="hljs-string">&quot;String.raw&quot;</span>, <span class="hljs-comment">// proxy for template literals</span>
<span id="line94" class="lineno">94</span>        <span class="hljs-string">&quot;URL&quot;</span>,
<span id="line95" class="lineno">95</span>        <span class="hljs-string">&quot;URL.createObjectURL&quot;</span>,
<span id="line96" class="lineno">96</span>        <span class="hljs-string">&quot;URL.revokeObjectURL&quot;</span>,
<span id="line97" class="lineno">97</span>        <span class="hljs-string">&quot;URLSearchParams&quot;</span>,
<span id="line98" class="lineno">98</span>        <span class="hljs-string">&quot;console.assert&quot;</span>,
<span id="line99" class="lineno">99</span>        <span class="hljs-string">&quot;console.debug&quot;</span>,
<span id="line100" class="lineno">100</span>        <span class="hljs-string">&quot;console.error&quot;</span>,
<span id="line101" class="lineno">101</span>        <span class="hljs-string">&quot;console.info&quot;</span>,
<span id="line102" class="lineno">102</span>        <span class="hljs-string">&quot;console.log&quot;</span>,
<span id="line103" class="lineno">103</span>        <span class="hljs-string">&quot;console.warn&quot;</span>,
<span id="line104" class="lineno">104</span>        <span class="hljs-string">&quot;document.querySelectorAll&quot;</span>,
<span id="line105" class="lineno">105</span>        <span class="hljs-string">&quot;fetch&quot;</span>,
<span id="line106" class="lineno">106</span>        <span class="hljs-string">&quot;localStorage.getItem&quot;</span>,
<span id="line107" class="lineno">107</span>        <span class="hljs-string">&quot;sessionStorage.setItem&quot;</span>,
<span id="line108" class="lineno">108</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;&#x27;head&#x27; in document&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;document.head shortcut&quot;</span> },
<span id="line109" class="lineno">109</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;&#x27;classList&#x27; in Element.prototype&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Element.prototype.classList&quot;</span> },
<span id="line110" class="lineno">110</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;&#x27;dataset&#x27; in HTMLElement.prototype&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;HTMLElement.prototype.dataset&quot;</span> },
<span id="line111" class="lineno">111</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;&#x27;onload&#x27; in HTMLLinkElement.prototype&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;&lt;link&gt; element onload&quot;</span> },
<span id="line112" class="lineno">112</span>        {
<span id="line113" class="lineno">113</span>            <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;var el = document.createElement(&#x27;div&#x27;);el.style.cssText=&#x27;width:calc(10px);&#x27;;!!el.style.length&quot;</span>,
<span id="line114" class="lineno">114</span>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;CSS calc()&quot;</span>
<span id="line115" class="lineno">115</span>        },
<span id="line116" class="lineno">116</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;let a = 2; a === 2&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Let statements&quot;</span> },
<span id="line117" class="lineno">117</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;const a = 3; a === 3&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Const statements&quot;</span> },
<span id="line118" class="lineno">118</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;for (var el of []) el; true&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;loops with for...of&quot;</span> },
<span id="line119" class="lineno">119</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;var a = 42; ({ a }).a === 42&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;shorthand property names&quot;</span> },
<span id="line120" class="lineno">120</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;({ f(arg) { return arg; } }).f(true)&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;shorthand method names&quot;</span> },
<span id="line121" class="lineno">121</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;var k = &#x27;a&#x27;; ({ [k]: 42 })[&#x27;a&#x27;] === 42&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;computed property names&quot;</span> },
<span id="line122" class="lineno">122</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;((a,  b, ...args) =&gt; true)()&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;rest parameters&quot;</span> },
<span id="line123" class="lineno">123</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;Math.max(...[1, 2, 3]) === 3&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;spread parameters&quot;</span> },
<span id="line124" class="lineno">124</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;[...[1, 2, 3]].length === 3&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;spread array literals&quot;</span> },
<span id="line125" class="lineno">125</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;({...{ a: 42}}).a == 42&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;spread object literals&quot;</span> },
<span id="line126" class="lineno">126</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;var [a, ...b] = [1, 2, 3]; a == 1 &amp;&amp; b.length == 2&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;array destructuring assignment&quot;</span> },
<span id="line127" class="lineno">127</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;var {a, b} = { a: 1, b: 2, c: 3 }; a == 1 &amp;&amp; b == 2&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;object destructuring assignment&quot;</span> },
<span id="line128" class="lineno">128</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;class Test {}; true&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Class declarations&quot;</span> },
<span id="line129" class="lineno">129</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;(() =&gt; true)()&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Arrow functions&quot;</span> },
<span id="line130" class="lineno">130</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;async () =&gt; await Promise.resolve(true)&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;async/await functions&quot;</span> },
<span id="line131" class="lineno">131</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;typeof(Symbol.iterator) === &#x27;symbol&#x27;&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Symbol.iterator&quot;</span> },
<span id="line132" class="lineno">132</span>        <span class="hljs-string">&quot;--variable-name: #fff&quot;</span>,
<span id="line133" class="lineno">133</span>        <span class="hljs-string">&quot;display: flex&quot;</span>,
<span id="line134" class="lineno">134</span>    ];
<span id="line135" class="lineno">135</span>
<span id="line136" class="lineno">136</span>    <span class="hljs-comment">/**
<span id="line137" class="lineno">137</span>     * List of all optional (or recommended) browser features. These are
<span id="line138" class="lineno">138</span>     * not used in built-in libraries and apps, but will be in the future.
<span id="line139" class="lineno">139</span>     *
<span id="line140" class="lineno">140</span>     * <span class="hljs-doctag">@name</span> <span class="hljs-variable">OPTIONAL</span>
<span id="line141" class="lineno">141</span>     * <span class="hljs-doctag">@memberof</span> RapidContext.Browser
<span id="line142" class="lineno">142</span>     * <span class="hljs-doctag">@constant</span>
<span id="line143" class="lineno">143</span>     */</span>
<span id="line144" class="lineno">144</span>    <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">OPTIONAL</span> = [
<span id="line145" class="lineno">145</span>        <span class="hljs-string">&quot;AbortController&quot;</span>,
<span id="line146" class="lineno">146</span>        <span class="hljs-string">&quot;AbortSignal&quot;</span>,
<span id="line147" class="lineno">147</span>        <span class="hljs-comment">// &quot;Array.prototype.at&quot;,</span>
<span id="line148" class="lineno">148</span>        <span class="hljs-string">&quot;Array.prototype.flat&quot;</span>,
<span id="line149" class="lineno">149</span>        <span class="hljs-string">&quot;Array.prototype.flatMap&quot;</span>,
<span id="line150" class="lineno">150</span>        <span class="hljs-string">&quot;BigInt&quot;</span>,
<span id="line151" class="lineno">151</span>        <span class="hljs-string">&quot;Element.prototype.replaceChildren&quot;</span>,
<span id="line152" class="lineno">152</span>        <span class="hljs-comment">// &quot;Element.prototype.scrollIntoView&quot;,</span>
<span id="line153" class="lineno">153</span>        <span class="hljs-comment">// &quot;HTMLDialogElement&quot;,</span>
<span id="line154" class="lineno">154</span>        <span class="hljs-comment">// &quot;HTMLScriptElement.supports&quot;,</span>
<span id="line155" class="lineno">155</span>        <span class="hljs-comment">// &quot;navigator.credentials.create&quot;,</span>
<span id="line156" class="lineno">156</span>        <span class="hljs-comment">// &quot;navigator.credentials.get&quot;,</span>
<span id="line157" class="lineno">157</span>        <span class="hljs-comment">// &quot;Object.hasOwn&quot;,</span>
<span id="line158" class="lineno">158</span>        <span class="hljs-string">&quot;Object.fromEntries&quot;</span>,
<span id="line159" class="lineno">159</span>        <span class="hljs-string">&quot;Promise.allSettled&quot;</span>,
<span id="line160" class="lineno">160</span>        <span class="hljs-string">&quot;Promise.any&quot;</span>,
<span id="line161" class="lineno">161</span>        <span class="hljs-string">&quot;String.prototype.replaceAll&quot;</span>,
<span id="line162" class="lineno">162</span>        <span class="hljs-comment">// &quot;SubtleCrypto.prototype.digest&quot;,</span>
<span id="line163" class="lineno">163</span>        <span class="hljs-comment">// &quot;Temporal&quot;,</span>
<span id="line164" class="lineno">164</span>        <span class="hljs-string">&quot;TextEncoder&quot;</span>,
<span id="line165" class="lineno">165</span>        <span class="hljs-string">&quot;TextDecoder&quot;</span>,
<span id="line166" class="lineno">166</span>        <span class="hljs-string">&quot;ResizeObserver&quot;</span>,
<span id="line167" class="lineno">167</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;globalThis === window&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;globalThis&quot;</span> },
<span id="line168" class="lineno">168</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;&#x27;key&#x27; in KeyboardEvent.prototype&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;KeyboardEvent.key&quot;</span> },
<span id="line169" class="lineno">169</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;/^\\p{L}+$/u.test(&#x27;a\u00E5\u00C4&#x27;)&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;regexp Unicode character class escape&quot;</span> },
<span id="line170" class="lineno">170</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;&#x27;noModule&#x27; in HTMLScriptElement.prototype&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;ES modules (import/export)&quot;</span> },
<span id="line171" class="lineno">171</span>        <span class="hljs-comment">// { test: &quot;HTMLScriptElement.supports(&#x27;module&#x27;)&quot;, name: &quot;ES module script&quot;, },</span>
<span id="line172" class="lineno">172</span>        <span class="hljs-comment">// { test: &quot;HTMLScriptElement.supports(&#x27;importmap&#x27;)&quot;, name: &quot;ES module import maps&quot;, },</span>
<span id="line173" class="lineno">173</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;var a = null; a?.dummy; true&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;optional chaining operator (?.)&quot;</span> },
<span id="line174" class="lineno">174</span>        { <span class="hljs-attr">test</span>: <span class="hljs-string">&quot;null ?? true&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;nullish coalescing operator (??)&quot;</span> },
<span id="line175" class="lineno">175</span>        <span class="hljs-comment">// &quot;selector(:has(*))&quot;,</span>
<span id="line176" class="lineno">176</span>        <span class="hljs-comment">// &quot;appearance: none&quot;,</span>
<span id="line177" class="lineno">177</span>        <span class="hljs-comment">// &quot;inset: 0&quot;,</span>
<span id="line178" class="lineno">178</span>        <span class="hljs-comment">// &quot;line-clamp: 3&quot;,</span>
<span id="line179" class="lineno">179</span>        <span class="hljs-comment">// &quot;user-select: none&quot;,</span>
<span id="line180" class="lineno">180</span>    ];
<span id="line181" class="lineno">181</span>
<span id="line182" class="lineno">182</span>    <span class="hljs-comment">/**
<span id="line183" class="lineno">183</span>     * Checks if the browser supports all required APIs.
<span id="line184" class="lineno">184</span>     *
<span id="line185" class="lineno">185</span>     * <span class="hljs-doctag">@return</span> {<span class="hljs-type">boolean</span>} true if the browser is supported, or false otherwise
<span id="line186" class="lineno">186</span>     *
<span id="line187" class="lineno">187</span>     * <span class="hljs-doctag">@memberof</span> RapidContext.Browser
<span id="line188" class="lineno">188</span>     */</span>
<span id="line189" class="lineno">189</span>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">isSupported</span>(<span class="hljs-params"></span>) {
<span id="line190" class="lineno">190</span>        <span class="hljs-keyword">var</span> hasRequired = <span class="hljs-title function_">supports</span>(<span class="hljs-variable constant_">REQUIRED</span>);
<span id="line191" class="lineno">191</span>        <span class="hljs-keyword">var</span> hasOptional = <span class="hljs-title function_">supports</span>(<span class="hljs-variable constant_">OPTIONAL</span>);
<span id="line192" class="lineno">192</span>        <span class="hljs-keyword">if</span> (!hasRequired) {
<span id="line193" class="lineno">193</span>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;browser: required features are missing&quot;</span>, <span class="hljs-title function_">info</span>());
<span id="line194" class="lineno">194</span>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!hasOptional) {
<span id="line195" class="lineno">195</span>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;browser: some recommended features are missing&quot;</span>, <span class="hljs-title function_">info</span>());
<span id="line196" class="lineno">196</span>        }
<span id="line197" class="lineno">197</span>        <span class="hljs-keyword">return</span> hasRequired;
<span id="line198" class="lineno">198</span>    }
<span id="line199" class="lineno">199</span>
<span id="line200" class="lineno">200</span>    <span class="hljs-comment">/**
<span id="line201" class="lineno">201</span>     * Checks for browser support for one or more specified APIs. Supports
<span id="line202" class="lineno">202</span>     * checking JavaScript APIs, JavaScript syntax and CSS support.
<span id="line203" class="lineno">203</span>     *
<span id="line204" class="lineno">204</span>     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">...(string|Object|Array)</span>} feature one or more features to check
<span id="line205" class="lineno">205</span>     * <span class="hljs-doctag">@return</span> {<span class="hljs-type">boolean</span>} `true` if supported, or `false` otherwise
<span id="line206" class="lineno">206</span>     *
<span id="line207" class="lineno">207</span>     * <span class="hljs-doctag">@example</span>
<span id="line208" class="lineno">208</span>     * RapidContext.Browser.supports(&quot;Array.isArray&quot;) ==&gt; true;
<span id="line209" class="lineno">209</span>     * RapidContext.Browser.supports({ test: &quot;let a = 2; a === 2&quot;, name: &quot;Let statements&quot; }) ==&gt; true;
<span id="line210" class="lineno">210</span>     * RapidContext.Browser.supports(&quot;display: flex&quot;) ==&gt; false;
<span id="line211" class="lineno">211</span>     *
<span id="line212" class="lineno">212</span>     * <span class="hljs-doctag">@memberof</span> RapidContext.Browser
<span id="line213" class="lineno">213</span>     */</span>
<span id="line214" class="lineno">214</span>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">supports</span>(<span class="hljs-params">feature<span class="hljs-comment">/*, ...*/</span></span>) {
<span id="line215" class="lineno">215</span>        <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkCSS</span>(<span class="hljs-params">code</span>) {
<span id="line216" class="lineno">216</span>            <span class="hljs-keyword">try</span> {
<span id="line217" class="lineno">217</span>                <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">CSS</span>.<span class="hljs-title function_">supports</span>(<span class="hljs-string">&quot;(&quot;</span> + code + <span class="hljs-string">&quot;)&quot;</span>);
<span id="line218" class="lineno">218</span>            } <span class="hljs-keyword">catch</span> (ignore) {
<span id="line219" class="lineno">219</span>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
<span id="line220" class="lineno">220</span>            }
<span id="line221" class="lineno">221</span>        }
<span id="line222" class="lineno">222</span>        <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkPath</span>(<span class="hljs-params">base, path</span>) {
<span id="line223" class="lineno">223</span>            <span class="hljs-keyword">while</span> (base &amp;&amp; path.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
<span id="line224" class="lineno">224</span>                base = base[path.<span class="hljs-title function_">shift</span>()];
<span id="line225" class="lineno">225</span>            }
<span id="line226" class="lineno">226</span>            <span class="hljs-keyword">return</span> <span class="hljs-title function_">typeof</span>(base) === <span class="hljs-string">&quot;function&quot;</span>;
<span id="line227" class="lineno">227</span>        }
<span id="line228" class="lineno">228</span>        <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkEval</span>(<span class="hljs-params">code</span>) {
<span id="line229" class="lineno">229</span>            <span class="hljs-keyword">try</span> {
<span id="line230" class="lineno">230</span>                <span class="hljs-keyword">var</span> val = <span class="hljs-built_in">eval</span>(code);
<span id="line231" class="lineno">231</span>                <span class="hljs-keyword">return</span> val !== <span class="hljs-literal">undefined</span> &amp;&amp; val !== <span class="hljs-literal">null</span>;
<span id="line232" class="lineno">232</span>            } <span class="hljs-keyword">catch</span> (ignore) {
<span id="line233" class="lineno">233</span>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
<span id="line234" class="lineno">234</span>            }
<span id="line235" class="lineno">235</span>        }
<span id="line236" class="lineno">236</span>        <span class="hljs-keyword">function</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">test</span>) {
<span id="line237" class="lineno">237</span>            <span class="hljs-keyword">var</span> isCSS = <span class="hljs-regexp">/^[a-z-]+:|selector\(/i</span>.<span class="hljs-title function_">test</span>(test);
<span id="line238" class="lineno">238</span>            <span class="hljs-keyword">var</span> isPath = <span class="hljs-regexp">/^[a-z]+(\.[a-z]+)*$/i</span>.<span class="hljs-title function_">test</span>(test);
<span id="line239" class="lineno">239</span>            <span class="hljs-keyword">var</span> isValid = (
<span id="line240" class="lineno">240</span>                (isCSS &amp;&amp; <span class="hljs-title function_">checkCSS</span>(test)) ||
<span id="line241" class="lineno">241</span>                (isPath &amp;&amp; <span class="hljs-title function_">checkPath</span>(<span class="hljs-variable language_">window</span>, test.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;.&quot;</span>))) ||
<span id="line242" class="lineno">242</span>                (!isCSS &amp;&amp; !isPath &amp;&amp; <span class="hljs-title function_">checkEval</span>(test))
<span id="line243" class="lineno">243</span>            );
<span id="line244" class="lineno">244</span>            <span class="hljs-keyword">return</span> isValid;
<span id="line245" class="lineno">245</span>        }
<span id="line246" class="lineno">246</span>        <span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> Code below uses old school JavaScript for compatibility</span>
<span id="line247" class="lineno">247</span>        <span class="hljs-keyword">var</span> res = <span class="hljs-literal">true</span>;
<span id="line248" class="lineno">248</span>        <span class="hljs-keyword">var</span> features = (feature <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) ? feature : <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>);
<span id="line249" class="lineno">249</span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; features.<span class="hljs-property">length</span>; i++) {
<span id="line250" class="lineno">250</span>            <span class="hljs-keyword">var</span> def = features[i].<span class="hljs-property">test</span> ? features[i] : { <span class="hljs-attr">test</span>: features[i] };
<span id="line251" class="lineno">251</span>            <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">check</span>(def.<span class="hljs-property">test</span>)) {
<span id="line252" class="lineno">252</span>                <span class="hljs-keyword">var</span> explain = [def.<span class="hljs-property">name</span>, def.<span class="hljs-property">test</span>].<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;: &quot;</span>);
<span id="line253" class="lineno">253</span>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;browser: missing support for &quot;</span> + explain);
<span id="line254" class="lineno">254</span>                res = <span class="hljs-literal">false</span>;
<span id="line255" class="lineno">255</span>            }
<span id="line256" class="lineno">256</span>        }
<span id="line257" class="lineno">257</span>        <span class="hljs-keyword">return</span> res;
<span id="line258" class="lineno">258</span>    }
<span id="line259" class="lineno">259</span>
<span id="line260" class="lineno">260</span>    <span class="hljs-comment">/**
<span id="line261" class="lineno">261</span>     * Returns browser information version and platform information.
<span id="line262" class="lineno">262</span>     *
<span id="line263" class="lineno">263</span>     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [userAgent] the agent string, or undefined for this browser
<span id="line264" class="lineno">264</span>     * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Object</span>} a browser meta-data object
<span id="line265" class="lineno">265</span>     *
<span id="line266" class="lineno">266</span>     * <span class="hljs-doctag">@memberof</span> RapidContext.Browser
<span id="line267" class="lineno">267</span>     */</span>
<span id="line268" class="lineno">268</span>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">info</span>(<span class="hljs-params">userAgent</span>) {
<span id="line269" class="lineno">269</span>        <span class="hljs-keyword">function</span> <span class="hljs-title function_">firstMatch</span>(<span class="hljs-params">patterns, text</span>) {
<span id="line270" class="lineno">270</span>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k <span class="hljs-keyword">in</span> patterns) {
<span id="line271" class="lineno">271</span>                <span class="hljs-keyword">var</span> m = patterns[k].<span class="hljs-title function_">exec</span>(text);
<span id="line272" class="lineno">272</span>                <span class="hljs-keyword">if</span> (m) {
<span id="line273" class="lineno">273</span>                    <span class="hljs-keyword">var</span> extra = m[<span class="hljs-number">1</span>] ? <span class="hljs-string">&quot; &quot;</span> + m[<span class="hljs-number">1</span>] : <span class="hljs-string">&quot;&quot;</span>;
<span id="line274" class="lineno">274</span>                    <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^[ \d_.]+$/</span>.<span class="hljs-title function_">test</span>(extra)) {
<span id="line275" class="lineno">275</span>                        extra = extra.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/_/g</span>, <span class="hljs-string">&quot;.&quot;</span>);
<span id="line276" class="lineno">276</span>                    }
<span id="line277" class="lineno">277</span>                    <span class="hljs-keyword">return</span> k + extra;
<span id="line278" class="lineno">278</span>                }
<span id="line279" class="lineno">279</span>            }
<span id="line280" class="lineno">280</span>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
<span id="line281" class="lineno">281</span>        }
<span id="line282" class="lineno">282</span>        <span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">obj, keys</span>) {
<span id="line283" class="lineno">283</span>            <span class="hljs-keyword">var</span> res = {};
<span id="line284" class="lineno">284</span>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; keys.<span class="hljs-property">length</span>; i++) {
<span id="line285" class="lineno">285</span>                <span class="hljs-keyword">var</span> k = keys[i];
<span id="line286" class="lineno">286</span>                res[k] = obj[k];
<span id="line287" class="lineno">287</span>            }
<span id="line288" class="lineno">288</span>            <span class="hljs-keyword">return</span> res;
<span id="line289" class="lineno">289</span>        }
<span id="line290" class="lineno">290</span>        <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">BROWSERS</span> = {
<span id="line291" class="lineno">291</span>            <span class="hljs-string">&quot;Bot&quot;</span>: <span class="hljs-regexp">/Bot|Spider|PhantomJS|Headless|Electron|slimerjs|Python/i</span>,
<span id="line292" class="lineno">292</span>            <span class="hljs-string">&quot;Edge&quot;</span>: <span class="hljs-regexp">/Edg(?:e|A|iOS|)\/([^\s;]+)/</span>,
<span id="line293" class="lineno">293</span>            <span class="hljs-string">&quot;Chrome&quot;</span>: <span class="hljs-regexp">/Chrome\/([^\s;]+)/</span>,
<span id="line294" class="lineno">294</span>            <span class="hljs-string">&quot;Chrome iOS&quot;</span>: <span class="hljs-regexp">/CriOS\/([^\s;]+)/</span>,
<span id="line295" class="lineno">295</span>            <span class="hljs-string">&quot;Firefox&quot;</span>: <span class="hljs-regexp">/Firefox\/([^\s;]+)/</span>,
<span id="line296" class="lineno">296</span>            <span class="hljs-string">&quot;Firefox iOS&quot;</span>: <span class="hljs-regexp">/FxiOS\/([^\s;]+)/</span>,
<span id="line297" class="lineno">297</span>            <span class="hljs-string">&quot;Safari&quot;</span>: <span class="hljs-regexp">/Version\/(\S+).* Safari\/[^\s;]+/</span>,
<span id="line298" class="lineno">298</span>            <span class="hljs-string">&quot;MSIE&quot;</span>: <span class="hljs-regexp">/(?:MSIE |Trident\/.*rv:)([^\s;)]+)/</span>
<span id="line299" class="lineno">299</span>        };
<span id="line300" class="lineno">300</span>        <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">PLATFORMS</span> = {
<span id="line301" class="lineno">301</span>            <span class="hljs-string">&quot;Android&quot;</span>: <span class="hljs-regexp">/Android ([^;)]+)/</span>,
<span id="line302" class="lineno">302</span>            <span class="hljs-string">&quot;Chrome OS&quot;</span>: <span class="hljs-regexp">/CrOS [^\s]+ ([^;)]+)/</span>,
<span id="line303" class="lineno">303</span>            <span class="hljs-string">&quot;iOS&quot;</span>: <span class="hljs-regexp">/(?:iPhone|CPU) OS ([\d_]+)/</span>,
<span id="line304" class="lineno">304</span>            <span class="hljs-string">&quot;macOS&quot;</span>: <span class="hljs-regexp">/Mac OS X ([^;)]+)/</span>,
<span id="line305" class="lineno">305</span>            <span class="hljs-string">&quot;Linux&quot;</span>: <span class="hljs-regexp">/Linux ([^;)]+)/</span>,
<span id="line306" class="lineno">306</span>            <span class="hljs-string">&quot;Windows&quot;</span>: <span class="hljs-regexp">/Windows ([^;)]+)/</span>
<span id="line307" class="lineno">307</span>        };
<span id="line308" class="lineno">308</span>        <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">DEVICES</span> = {
<span id="line309" class="lineno">309</span>            <span class="hljs-string">&quot;iPad&quot;</span>: <span class="hljs-regexp">/iPad/</span>,
<span id="line310" class="lineno">310</span>            <span class="hljs-string">&quot;iPhone&quot;</span>: <span class="hljs-regexp">/iPhone/</span>,
<span id="line311" class="lineno">311</span>            <span class="hljs-string">&quot;Tablet&quot;</span>: <span class="hljs-regexp">/Tablet/</span>,
<span id="line312" class="lineno">312</span>            <span class="hljs-string">&quot;Mobile&quot;</span>: <span class="hljs-regexp">/Mobile|Android/</span>
<span id="line313" class="lineno">313</span>        };
<span id="line314" class="lineno">314</span>        <span class="hljs-keyword">var</span> ua = userAgent || <span class="hljs-variable language_">window</span>.<span class="hljs-property">navigator</span>.<span class="hljs-property">userAgent</span>;
<span id="line315" class="lineno">315</span>        <span class="hljs-keyword">var</span> browser = <span class="hljs-title function_">firstMatch</span>(<span class="hljs-variable constant_">BROWSERS</span>, ua);
<span id="line316" class="lineno">316</span>        <span class="hljs-keyword">var</span> platform = <span class="hljs-title function_">firstMatch</span>(<span class="hljs-variable constant_">PLATFORMS</span>, ua);
<span id="line317" class="lineno">317</span>        <span class="hljs-keyword">var</span> device = <span class="hljs-title function_">firstMatch</span>(<span class="hljs-variable constant_">DEVICES</span>, ua);
<span id="line318" class="lineno">318</span>        <span class="hljs-keyword">var</span> res = {};
<span id="line319" class="lineno">319</span>        <span class="hljs-keyword">if</span> (browser &amp;&amp; platform) {
<span id="line320" class="lineno">320</span>            res[<span class="hljs-string">&quot;browser&quot;</span>] = browser;
<span id="line321" class="lineno">321</span>            res[<span class="hljs-string">&quot;platform&quot;</span>] = platform;
<span id="line322" class="lineno">322</span>            res[<span class="hljs-string">&quot;device&quot;</span>] = device || <span class="hljs-string">&quot;Desktop/Other&quot;</span>;
<span id="line323" class="lineno">323</span>        }
<span id="line324" class="lineno">324</span>        <span class="hljs-keyword">if</span> (!userAgent) {
<span id="line325" class="lineno">325</span>            res[<span class="hljs-string">&quot;language&quot;</span>] = <span class="hljs-variable language_">window</span>.<span class="hljs-property">navigator</span>.<span class="hljs-property">language</span>;
<span id="line326" class="lineno">326</span>            res[<span class="hljs-string">&quot;screen&quot;</span>] = <span class="hljs-title function_">clone</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">screen</span>, [<span class="hljs-string">&quot;width&quot;</span>, <span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-string">&quot;colorDepth&quot;</span>]);
<span id="line327" class="lineno">327</span>            res[<span class="hljs-string">&quot;window&quot;</span>] = <span class="hljs-title function_">clone</span>(<span class="hljs-variable language_">window</span>, [<span class="hljs-string">&quot;innerWidth&quot;</span>, <span class="hljs-string">&quot;innerHeight&quot;</span>, <span class="hljs-string">&quot;devicePixelRatio&quot;</span>]);
<span id="line328" class="lineno">328</span>            res[<span class="hljs-string">&quot;cookies&quot;</span>] = <span class="hljs-title function_">_cookies</span>();
<span id="line329" class="lineno">329</span>        }
<span id="line330" class="lineno">330</span>        res[<span class="hljs-string">&quot;userAgent&quot;</span>] = <span class="hljs-title class_">String</span>(ua);
<span id="line331" class="lineno">331</span>        <span class="hljs-keyword">return</span> res;
<span id="line332" class="lineno">332</span>    }
<span id="line333" class="lineno">333</span>
<span id="line334" class="lineno">334</span>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_cookies</span>(<span class="hljs-params"></span>) {
<span id="line335" class="lineno">335</span>        <span class="hljs-keyword">var</span> cookies = {};
<span id="line336" class="lineno">336</span>        <span class="hljs-keyword">var</span> pairs = <span class="hljs-variable language_">window</span>.<span class="hljs-property">document</span>.<span class="hljs-property">cookie</span>.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\s*;\s*/g</span>);
<span id="line337" class="lineno">337</span>        pairs.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">pair</span>) {
<span id="line338" class="lineno">338</span>            <span class="hljs-keyword">var</span> name = pair.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;=&quot;</span>)[<span class="hljs-number">0</span>];
<span id="line339" class="lineno">339</span>            <span class="hljs-keyword">var</span> value = pair.<span class="hljs-title function_">substr</span>(name.<span class="hljs-property">length</span> + <span class="hljs-number">1</span>);
<span id="line340" class="lineno">340</span>            <span class="hljs-keyword">if</span> (name &amp;&amp; value) {
<span id="line341" class="lineno">341</span>                cookies[<span class="hljs-built_in">decodeURIComponent</span>(name)] = <span class="hljs-built_in">decodeURIComponent</span>(value);
<span id="line342" class="lineno">342</span>            }
<span id="line343" class="lineno">343</span>        });
<span id="line344" class="lineno">344</span>        <span class="hljs-keyword">return</span> cookies;
<span id="line345" class="lineno">345</span>    }
<span id="line346" class="lineno">346</span>
<span id="line347" class="lineno">347</span>    <span class="hljs-comment">/**
<span id="line348" class="lineno">348</span>     * Gets, sets or removes browser cookies.
<span id="line349" class="lineno">349</span>     *
<span id="line350" class="lineno">350</span>     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [name] the cookie name to get/set
<span id="line351" class="lineno">351</span>     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [value] the cookie value to set, or null to remove
<span id="line352" class="lineno">352</span>     * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Object|string</span>} all cookie values or a single value
<span id="line353" class="lineno">353</span>     *
<span id="line354" class="lineno">354</span>      * <span class="hljs-doctag">@memberof</span> RapidContext.Browser
<span id="line355" class="lineno">355</span>     */</span>
<span id="line356" class="lineno">356</span>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">cookie</span>(<span class="hljs-params">name, value</span>) {
<span id="line357" class="lineno">357</span>        <span class="hljs-keyword">if</span> (name === <span class="hljs-literal">undefined</span> || name === <span class="hljs-literal">null</span>) {
<span id="line358" class="lineno">358</span>            <span class="hljs-keyword">return</span> <span class="hljs-title function_">_cookies</span>();
<span id="line359" class="lineno">359</span>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">undefined</span>) {
<span id="line360" class="lineno">360</span>            <span class="hljs-keyword">return</span> <span class="hljs-title function_">_cookies</span>()[name];
<span id="line361" class="lineno">361</span>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span>) {
<span id="line362" class="lineno">362</span>            <span class="hljs-keyword">var</span> prefix = <span class="hljs-built_in">encodeURIComponent</span>(name) + <span class="hljs-string">&quot;=&quot;</span>;
<span id="line363" class="lineno">363</span>            <span class="hljs-keyword">var</span> suffix = <span class="hljs-string">&quot;;path=/;expires=&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">toUTCString</span>();
<span id="line364" class="lineno">364</span>            <span class="hljs-keyword">var</span> domain = <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hostname</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;.&quot;</span>);
<span id="line365" class="lineno">365</span>            <span class="hljs-keyword">while</span> (domain.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span>) {
<span id="line366" class="lineno">366</span>                <span class="hljs-keyword">var</span> domainPart = <span class="hljs-string">&quot;;domain=&quot;</span> + domain.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;.&quot;</span>);
<span id="line367" class="lineno">367</span>                <span class="hljs-variable language_">window</span>.<span class="hljs-property">document</span>.<span class="hljs-property">cookie</span> = prefix + domainPart + suffix;
<span id="line368" class="lineno">368</span>                domain.<span class="hljs-title function_">shift</span>();
<span id="line369" class="lineno">369</span>            }
<span id="line370" class="lineno">370</span>            <span class="hljs-variable language_">window</span>.<span class="hljs-property">document</span>.<span class="hljs-property">cookie</span> = prefix + suffix;
<span id="line371" class="lineno">371</span>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
<span id="line372" class="lineno">372</span>        } <span class="hljs-keyword">else</span> {
<span id="line373" class="lineno">373</span>            <span class="hljs-variable language_">window</span>.<span class="hljs-property">document</span>.<span class="hljs-property">cookie</span> = <span class="hljs-built_in">encodeURIComponent</span>(name) + <span class="hljs-string">&quot;=&quot;</span> + <span class="hljs-built_in">encodeURIComponent</span>(value) + <span class="hljs-string">&quot;;path=/&quot;</span>;
<span id="line374" class="lineno">374</span>            <span class="hljs-keyword">return</span> value;
<span id="line375" class="lineno">375</span>        }
<span id="line376" class="lineno">376</span>    }
<span id="line377" class="lineno">377</span>
<span id="line378" class="lineno">378</span>    <span class="hljs-comment">// Create namespaces</span>
<span id="line379" class="lineno">379</span>    <span class="hljs-keyword">var</span> <span class="hljs-title class_">RapidContext</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">RapidContext</span> || (<span class="hljs-variable language_">window</span>.<span class="hljs-property">RapidContext</span> = {});
<span id="line380" class="lineno">380</span>    <span class="hljs-keyword">var</span> <span class="hljs-variable language_">module</span> = <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Browser</span> || (<span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Browser</span> = {});
<span id="line381" class="lineno">381</span>
<span id="line382" class="lineno">382</span>    <span class="hljs-comment">// Export namespace symbols</span>
<span id="line383" class="lineno">383</span>    <span class="hljs-variable language_">module</span>.<span class="hljs-property">REQUIRED</span> = <span class="hljs-variable constant_">REQUIRED</span>;
<span id="line384" class="lineno">384</span>    <span class="hljs-variable language_">module</span>.<span class="hljs-property">OPTIONAL</span> = <span class="hljs-variable constant_">OPTIONAL</span>;
<span id="line385" class="lineno">385</span>    <span class="hljs-variable language_">module</span>.<span class="hljs-property">isSupported</span> = isSupported;
<span id="line386" class="lineno">386</span>    <span class="hljs-variable language_">module</span>.<span class="hljs-property">supports</span> = supports;
<span id="line387" class="lineno">387</span>    <span class="hljs-variable language_">module</span>.<span class="hljs-property">info</span> = info;
<span id="line388" class="lineno">388</span>    <span class="hljs-variable language_">module</span>.<span class="hljs-property">cookie</span> = cookie;
<span id="line389" class="lineno">389</span>
<span id="line390" class="lineno">390</span>})(<span class="hljs-variable language_">this</span>);
<span id="line391" class="lineno">391</span></code></pre>
        </article>
    </section>





      </div>
    </section>

    <section class="footer center fineprint">
      <hr>
      Copyright &copy; 2007-2023 Per Cederberg. All rights reserved.
    </section>

  </body>
</html>
