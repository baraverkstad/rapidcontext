
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="JsDoc" />
    <link rel="stylesheet" href="../css/style.css" type="text/css">
    <link rel="stylesheet" href="../css/doc.css" type="text/css">
    <link rel="stylesheet" href="../css/font-awesome-4.7.0.min.css" type="text/css">
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../images/logotype-icon.ico">
    <link rel="icon" type="image/png" sizes="256x256" href="../images/logotype-icon-256x256.png">
    <link rel="apple-touch-icon" sizes="256x256" href="../images/logotype-icon-256x256.png">
    <title>RapidContext :: JavaScript API</title>
  </head>
  <body class="doc">

    <section class="header">
      <div class="center">
        <a href="https://www.rapidcontext.com/" class="logotype">
          <img src="../images/logotype.png" />
        </a>
        <div class="text">
          <a href="https://www.rapidcontext.com/">
            <span style="font-size: 3.6em;">RapidContext</span><br>
            <span style="font-size: 1.75em; color: #caf3ff;">Access &#183; Discovery &#183; Insight</span><br>
            <span style="font-size: 1.3em; letter-spacing: 0.34em; line-height: 1.8em;">www.rapidcontext.com</span>
          </a>
        </div>
      </div>
      <div class="menu">
        <a href="https://www.rapidcontext.com/doc/index.html">Docs</a>
        &bull; <a href="https://github.com/cederberg/rapidcontext/releases">Downloads</a>
        &bull; <a href="https://github.com/cederberg/rapidcontext">Project</a>
      </div>
    </section>

    <section class="content center">
      <ol class="breadcrumb">
        <li><a href="../index.html">Documentation</a></li>

        <li><a href="index.html">JavaScript API</a></li>
        <li class="active">RapidContext_Widget.js</li>

      </ol>

      <div class="jsdoc">
        <h1 class="classTitle">Source RapidContext_Widget.js</h1>




    <section>
        <article>
            <pre><code class="hljs language-js" data-highlighted="yes"><span id="line1" class="lineno">1</span><span class="hljs-comment">/*
<span id="line2" class="lineno">2</span> * RapidContext &lt;https://www.rapidcontext.com/&gt;
<span id="line3" class="lineno">3</span> * Copyright (c) 2007-2026 Per Cederberg. All rights reserved.
<span id="line4" class="lineno">4</span> *
<span id="line5" class="lineno">5</span> * This program is free software: you can redistribute it and/or
<span id="line6" class="lineno">6</span> * modify it under the terms of the BSD license.
<span id="line7" class="lineno">7</span> *
<span id="line8" class="lineno">8</span> * This program is distributed in the hope that it will be useful,
<span id="line9" class="lineno">9</span> * but WITHOUT ANY WARRANTY; without even the implied warranty of
<span id="line10" class="lineno">10</span> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
<span id="line11" class="lineno">11</span> *
<span id="line12" class="lineno">12</span> * See the RapidContext LICENSE for more details.
<span id="line13" class="lineno">13</span> */</span>
<span id="line14" class="lineno">14</span>
<span id="line15" class="lineno">15</span><span class="hljs-comment">// Namespace initialization</span>
<span id="line16" class="lineno">16</span><span class="hljs-keyword">if</span> (<span class="hljs-title function_">typeof</span>(<span class="hljs-title class_">RapidContext</span>) == <span class="hljs-string">&quot;undefined&quot;</span>) {
<span id="line17" class="lineno">17</span>    <span class="hljs-title class_">RapidContext</span> = {};
<span id="line18" class="lineno">18</span>}
<span id="line19" class="lineno">19</span>
<span id="line20" class="lineno">20</span><span class="hljs-comment">/**
<span id="line21" class="lineno">21</span> * The base class for the HTML user interface widgets. The Widget
<span id="line22" class="lineno">22</span> * class shouldn&#x27;t be instantiated directly, instead one of the
<span id="line23" class="lineno">23</span> * subclasses should be instantiated.
<span id="line24" class="lineno">24</span> *
<span id="line25" class="lineno">25</span> * <span class="hljs-doctag">@class</span>
<span id="line26" class="lineno">26</span> * <span class="hljs-doctag">@augments</span> RapidContext.UI.Event
<span id="line27" class="lineno">27</span> */</span>
<span id="line28" class="lineno">28</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line29" class="lineno">29</span>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReferenceError</span>(<span class="hljs-string">&quot;cannot call Widget constructor&quot;</span>);
<span id="line30" class="lineno">30</span>};
<span id="line31" class="lineno">31</span>
<span id="line32" class="lineno">32</span><span class="hljs-comment">/**
<span id="line33" class="lineno">33</span> * The global widget registry. This is a widget lookup table where
<span id="line34" class="lineno">34</span> * all widgets should have an entry. The entries should be added as
<span id="line35" class="lineno">35</span> * the JavaScript file are loaded. Each widget is indexed by the
<span id="line36" class="lineno">36</span> * widget name (class name) and point to the constructor function.
<span id="line37" class="lineno">37</span> */</span>
<span id="line38" class="lineno">38</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">Classes</span> = {};
<span id="line39" class="lineno">39</span>
<span id="line40" class="lineno">40</span><span class="hljs-comment">/**
<span id="line41" class="lineno">41</span> * Function to return unique identifiers.
<span id="line42" class="lineno">42</span> *
<span id="line43" class="lineno">43</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>} the next number in the sequence
<span id="line44" class="lineno">44</span> */</span>
<span id="line45" class="lineno">45</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">_nextId</span> = <span class="hljs-title class_">MochiKit</span>.<span class="hljs-property">Base</span>.<span class="hljs-title function_">counter</span>();
<span id="line46" class="lineno">46</span>
<span id="line47" class="lineno">47</span><span class="hljs-comment">/**
<span id="line48" class="lineno">48</span> * Checks if the specified object is a widget. Any non-null object
<span id="line49" class="lineno">49</span> * that looks like a DOM node and has the element class &quot;widget&quot;
<span id="line50" class="lineno">50</span> * will cause this function to return `true`. Otherwise, `false` will
<span id="line51" class="lineno">51</span> * be returned. As an option, this function can also check if the
<span id="line52" class="lineno">52</span> * widget has a certain class by checking for an additional CSS
<span id="line53" class="lineno">53</span> * class &quot;widget&lt;className&gt;&quot; (which is a standard followed by all
<span id="line54" class="lineno">54</span> * widgets).
<span id="line55" class="lineno">55</span> *
<span id="line56" class="lineno">56</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} obj the object to check
<span id="line57" class="lineno">57</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [className] the optional widget class name
<span id="line58" class="lineno">58</span> *
<span id="line59" class="lineno">59</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">boolean</span>} `true` if the object looks like a widget, or
<span id="line60" class="lineno">60</span> *         `false` otherwise
<span id="line61" class="lineno">61</span> */</span>
<span id="line62" class="lineno">62</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">isWidget</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">obj, className</span>) {
<span id="line63" class="lineno">63</span>    <span class="hljs-keyword">return</span> obj &amp;&amp;
<span id="line64" class="lineno">64</span>           obj.<span class="hljs-property">nodeType</span> &gt; <span class="hljs-number">0</span> &amp;&amp;
<span id="line65" class="lineno">65</span>           obj.<span class="hljs-property">classList</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">&quot;widget&quot;</span>) &amp;&amp;
<span id="line66" class="lineno">66</span>           (!className || obj.<span class="hljs-property">classList</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">`widget<span class="hljs-subst">${className}</span>`</span>));
<span id="line67" class="lineno">67</span>};
<span id="line68" class="lineno">68</span>
<span id="line69" class="lineno">69</span><span class="hljs-comment">/**
<span id="line70" class="lineno">70</span> * Splits a string of CSS class names into an array.
<span id="line71" class="lineno">71</span> *
<span id="line72" class="lineno">72</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array|string</span>} val the CSS class names
<span id="line73" class="lineno">73</span> *
<span id="line74" class="lineno">74</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Array</span>} nested arrays with single CSS class names
<span id="line75" class="lineno">75</span> */</span>
<span id="line76" class="lineno">76</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">_toCssClass</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) {
<span id="line77" class="lineno">77</span>    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(val)) {
<span id="line78" class="lineno">78</span>        <span class="hljs-keyword">return</span> val.<span class="hljs-title function_">flatMap</span>(<span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">_toCssClass</span>);
<span id="line79" class="lineno">79</span>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (val) {
<span id="line80" class="lineno">80</span>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>(val).<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\s+/g</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>);
<span id="line81" class="lineno">81</span>    } <span class="hljs-keyword">else</span> {
<span id="line82" class="lineno">82</span>        <span class="hljs-keyword">return</span> [];
<span id="line83" class="lineno">83</span>    }
<span id="line84" class="lineno">84</span>};
<span id="line85" class="lineno">85</span>
<span id="line86" class="lineno">86</span><span class="hljs-comment">/**
<span id="line87" class="lineno">87</span> * Adds all functions from a widget class to a DOM node. This will also convert
<span id="line88" class="lineno">88</span> * the DOM node into a widget by adding the &quot;widget&quot; CSS class and all the
<span id="line89" class="lineno">89</span> * default widget functions from `Widget.prototype` (if not already done).
<span id="line90" class="lineno">90</span> *
<span id="line91" class="lineno">91</span> * The default widget functions are added non-destructively, using the prefix
<span id="line92" class="lineno">92</span> * &quot;__&quot; if also defined in the widget class.
<span id="line93" class="lineno">93</span> *
<span id="line94" class="lineno">94</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Node</span>} node the DOM node to modify
<span id="line95" class="lineno">95</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">...(Object|function)</span>} mixins the prototypes or classes to mixin
<span id="line96" class="lineno">96</span> *
<span id="line97" class="lineno">97</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Widget</span>} the widget DOM node
<span id="line98" class="lineno">98</span> */</span>
<span id="line99" class="lineno">99</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">_widgetMixin</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">node, ...mixins</span>) {
<span id="line100" class="lineno">100</span>    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-title function_">isWidget</span>(node)) {
<span id="line101" class="lineno">101</span>        node.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;widget&quot;</span>);
<span id="line102" class="lineno">102</span>        mixins.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>);
<span id="line103" class="lineno">103</span>        mixins.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">UI</span>.<span class="hljs-property">Event</span>);
<span id="line104" class="lineno">104</span>    }
<span id="line105" class="lineno">105</span>    <span class="hljs-keyword">while</span> (mixins.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
<span id="line106" class="lineno">106</span>        <span class="hljs-keyword">let</span> proto = mixins.<span class="hljs-title function_">pop</span>();
<span id="line107" class="lineno">107</span>        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">typeof</span>(proto) === <span class="hljs-string">&quot;function&quot;</span>) {
<span id="line108" class="lineno">108</span>            proto = proto.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
<span id="line109" class="lineno">109</span>        }
<span id="line110" class="lineno">110</span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> k <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyNames</span>(proto)) {
<span id="line111" class="lineno">111</span>            <span class="hljs-keyword">if</span> (k !== <span class="hljs-string">&quot;constructor&quot;</span>) {
<span id="line112" class="lineno">112</span>                <span class="hljs-keyword">try</span> {
<span id="line113" class="lineno">113</span>                    <span class="hljs-keyword">if</span> (k <span class="hljs-keyword">in</span> node) {
<span id="line114" class="lineno">114</span>                        node[<span class="hljs-string">`__<span class="hljs-subst">${k}</span>`</span>] = node[k];
<span id="line115" class="lineno">115</span>                    }
<span id="line116" class="lineno">116</span>                    <span class="hljs-keyword">const</span> desc = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(proto, k);
<span id="line117" class="lineno">117</span>                    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(node, k, desc);
<span id="line118" class="lineno">118</span>                } <span class="hljs-keyword">catch</span> (e) {
<span id="line119" class="lineno">119</span>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`failed to set &quot;<span class="hljs-subst">${k}</span>&quot; in DOM node`</span>, e, node);
<span id="line120" class="lineno">120</span>                }
<span id="line121" class="lineno">121</span>            }
<span id="line122" class="lineno">122</span>        }
<span id="line123" class="lineno">123</span>    }
<span id="line124" class="lineno">124</span>    <span class="hljs-keyword">return</span> node;
<span id="line125" class="lineno">125</span>};
<span id="line126" class="lineno">126</span>
<span id="line127" class="lineno">127</span><span class="hljs-comment">/**
<span id="line128" class="lineno">128</span> * Creates a new widget with the specified name, attributes and
<span id="line129" class="lineno">129</span> * child widgets or DOM nodes. The widget class name must have been
<span id="line130" class="lineno">130</span> * registered in the `RapidContext.Widget.Classes` lookup table, or an
<span id="line131" class="lineno">131</span> * exception will be thrown. This function is identical to calling
<span id="line132" class="lineno">132</span> * the constructor function directly.
<span id="line133" class="lineno">133</span> *
<span id="line134" class="lineno">134</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} name the widget class name
<span id="line135" class="lineno">135</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} attrs the widget and node attributes
<span id="line136" class="lineno">136</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">...(Node|Widget)</span>} [child] the child widgets or DOM nodes
<span id="line137" class="lineno">137</span> *
<span id="line138" class="lineno">138</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Widget</span>} the widget DOM node
<span id="line139" class="lineno">139</span> *
<span id="line140" class="lineno">140</span> * <span class="hljs-doctag">@throws</span> {<span class="hljs-type">ReferenceError</span>} if the widget class name couldn&#x27;t be
<span id="line141" class="lineno">141</span> *             found in `RapidContext.Widget.Classes`
<span id="line142" class="lineno">142</span> */</span>
<span id="line143" class="lineno">143</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">createWidget</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">name, attrs<span class="hljs-comment">/*, ...*/</span></span>) {
<span id="line144" class="lineno">144</span>    <span class="hljs-keyword">const</span> cls = <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">Classes</span>[name];
<span id="line145" class="lineno">145</span>    <span class="hljs-keyword">if</span> (cls == <span class="hljs-literal">null</span>) {
<span id="line146" class="lineno">146</span>        <span class="hljs-keyword">const</span> msg = <span class="hljs-string">`failed to find widget &#x27;<span class="hljs-subst">${name}</span>&#x27; in RapidContext.Widget.Classes`</span>;
<span id="line147" class="lineno">147</span>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReferenceError</span>(msg);
<span id="line148" class="lineno">148</span>    }
<span id="line149" class="lineno">149</span>    <span class="hljs-keyword">return</span> cls.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">arguments</span>).<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>));
<span id="line150" class="lineno">150</span>};
<span id="line151" class="lineno">151</span>
<span id="line152" class="lineno">152</span><span class="hljs-comment">/**
<span id="line153" class="lineno">153</span> * Destroys a widget or a DOM node. This function will remove the DOM
<span id="line154" class="lineno">154</span> * node from its parent, disconnect any signals and call destructor
<span id="line155" class="lineno">155</span> * functions. It is also applied recursively to to all child nodes.
<span id="line156" class="lineno">156</span> * Once destroyed, all references to the widget object should be
<span id="line157" class="lineno">157</span> * cleared to reclaim browser memory.
<span id="line158" class="lineno">158</span> *
<span id="line159" class="lineno">159</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Widget|Node|NodeList|Array</span>} node the DOM node or list
<span id="line160" class="lineno">160</span> */</span>
<span id="line161" class="lineno">161</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">destroyWidget</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">node</span>) {
<span id="line162" class="lineno">162</span>    <span class="hljs-keyword">if</span> (node?.<span class="hljs-property">nodeType</span> === <span class="hljs-number">1</span>) {
<span id="line163" class="lineno">163</span>        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">typeof</span>(node.<span class="hljs-property">destroy</span>) == <span class="hljs-string">&quot;function&quot;</span>) {
<span id="line164" class="lineno">164</span>            node.<span class="hljs-title function_">destroy</span>();
<span id="line165" class="lineno">165</span>        }
<span id="line166" class="lineno">166</span>        <span class="hljs-keyword">if</span> (node.<span class="hljs-property">parentNode</span> != <span class="hljs-literal">null</span>) {
<span id="line167" class="lineno">167</span>            node.<span class="hljs-title function_">remove</span>();
<span id="line168" class="lineno">168</span>        }
<span id="line169" class="lineno">169</span>        <span class="hljs-title class_">MochiKit</span>.<span class="hljs-property">Signal</span>.<span class="hljs-title function_">disconnectAll</span>(node);
<span id="line170" class="lineno">170</span>        <span class="hljs-title class_">MochiKit</span>.<span class="hljs-property">Signal</span>.<span class="hljs-title function_">disconnectAllTo</span>(node);
<span id="line171" class="lineno">171</span>        <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">UI</span>.<span class="hljs-property">Event</span>.<span class="hljs-title function_">off</span>(node);
<span id="line172" class="lineno">172</span>        <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-title function_">destroyWidget</span>(node.<span class="hljs-property">childNodes</span>);
<span id="line173" class="lineno">173</span>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">typeof</span>(node?.<span class="hljs-property">length</span>) === <span class="hljs-string">&quot;number&quot;</span>) {
<span id="line174" class="lineno">174</span>        <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(node).<span class="hljs-title function_">forEach</span>(<span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">destroyWidget</span>);
<span id="line175" class="lineno">175</span>    }
<span id="line176" class="lineno">176</span>};
<span id="line177" class="lineno">177</span>
<span id="line178" class="lineno">178</span><span class="hljs-comment">/**
<span id="line179" class="lineno">179</span> * Returns the unique identifier for this DOM node. If a node id has
<span id="line180" class="lineno">180</span> * already been set, that id will be returned. Otherwise a new id
<span id="line181" class="lineno">181</span> * will be generated and assigned to the widget DOM node.
<span id="line182" class="lineno">182</span> *
<span id="line183" class="lineno">183</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">string</span>} the the unique DOM node identifier
<span id="line184" class="lineno">184</span> */</span>
<span id="line185" class="lineno">185</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">uid</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line186" class="lineno">186</span>    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>) {
<span id="line187" class="lineno">187</span>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = <span class="hljs-string">`widget<span class="hljs-subst">${RapidContext.Widget._nextId()}</span>`</span>;
<span id="line188" class="lineno">188</span>    }
<span id="line189" class="lineno">189</span>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>;
<span id="line190" class="lineno">190</span>};
<span id="line191" class="lineno">191</span>
<span id="line192" class="lineno">192</span><span class="hljs-comment">/**
<span id="line193" class="lineno">193</span> * The internal widget destructor function. This method should only
<span id="line194" class="lineno">194</span> * be called by `destroyWidget()` and may be overridden by subclasses.
<span id="line195" class="lineno">195</span> * By default this method does nothing.
<span id="line196" class="lineno">196</span> */</span>
<span id="line197" class="lineno">197</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">destroy</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line198" class="lineno">198</span>    <span class="hljs-comment">// Nothing to do by default</span>
<span id="line199" class="lineno">199</span>};
<span id="line200" class="lineno">200</span>
<span id="line201" class="lineno">201</span><span class="hljs-comment">/**
<span id="line202" class="lineno">202</span> * Returns the widget container DOM node. By default this method
<span id="line203" class="lineno">203</span> * returns the widget itself, but subclasses may override it to place
<span id="line204" class="lineno">204</span> * child DOM nodes in a different container.
<span id="line205" class="lineno">205</span> *
<span id="line206" class="lineno">206</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Node</span>} the container DOM node, or
<span id="line207" class="lineno">207</span> *         null if this widget has no container
<span id="line208" class="lineno">208</span> */</span>
<span id="line209" class="lineno">209</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">_containerNode</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line210" class="lineno">210</span>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
<span id="line211" class="lineno">211</span>};
<span id="line212" class="lineno">212</span>
<span id="line213" class="lineno">213</span><span class="hljs-comment">/**
<span id="line214" class="lineno">214</span> * Returns the widget style DOM node. By default this method returns
<span id="line215" class="lineno">215</span> * the widget itself, but subclasses may override it to move widget
<span id="line216" class="lineno">216</span> * styling (but not sizing or positioning) to a subnode.
<span id="line217" class="lineno">217</span> *
<span id="line218" class="lineno">218</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Node</span>} the style DOM node
<span id="line219" class="lineno">219</span> */</span>
<span id="line220" class="lineno">220</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">_styleNode</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line221" class="lineno">221</span>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
<span id="line222" class="lineno">222</span>};
<span id="line223" class="lineno">223</span>
<span id="line224" class="lineno">224</span><span class="hljs-comment">/**
<span id="line225" class="lineno">225</span> * Updates the widget or HTML DOM node attributes. This method is
<span id="line226" class="lineno">226</span> * sometimes overridden by individual widgets to allow modification
<span id="line227" class="lineno">227</span> * of additional widget attributes.
<span id="line228" class="lineno">228</span> *
<span id="line229" class="lineno">229</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} attrs the widget and node attributes to set
<span id="line230" class="lineno">230</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} [attrs.disabled] the disabled widget flag
<span id="line231" class="lineno">231</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} [attrs.hidden] the hidden widget flag
<span id="line232" class="lineno">232</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [attrs.class] the CSS class names
<span id="line233" class="lineno">233</span> */</span>
<span id="line234" class="lineno">234</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">setAttrs</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">attrs</span>) {
<span id="line235" class="lineno">235</span>    <span class="hljs-comment">/* eslint max-depth: &quot;off&quot; */</span>
<span id="line236" class="lineno">236</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> name <span class="hljs-keyword">in</span> attrs) {
<span id="line237" class="lineno">237</span>        <span class="hljs-keyword">let</span> value = attrs[name];
<span id="line238" class="lineno">238</span>        <span class="hljs-keyword">if</span> (name == <span class="hljs-string">&quot;disabled&quot;</span>) {
<span id="line239" class="lineno">239</span>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_setDisabled</span>(value);
<span id="line240" class="lineno">240</span>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (name == <span class="hljs-string">&quot;hidden&quot;</span>) {
<span id="line241" class="lineno">241</span>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_setHidden</span>(value);
<span id="line242" class="lineno">242</span>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (name == <span class="hljs-string">&quot;class&quot;</span>) {
<span id="line243" class="lineno">243</span>            <span class="hljs-keyword">const</span> elem = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_styleNode</span>();
<span id="line244" class="lineno">244</span>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeClass</span>(...elem.<span class="hljs-property">className</span>.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\s+/</span>));
<span id="line245" class="lineno">245</span>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addClass</span>(...value.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\s+/</span>));
<span id="line246" class="lineno">246</span>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (name == <span class="hljs-string">&quot;style&quot;</span>) {
<span id="line247" class="lineno">247</span>            <span class="hljs-keyword">if</span> (<span class="hljs-title function_">typeof</span>(value) == <span class="hljs-string">&quot;string&quot;</span>) {
<span id="line248" class="lineno">248</span>                <span class="hljs-keyword">const</span> <span class="hljs-title function_">func</span> = (<span class="hljs-params">res, part</span>) =&gt; {
<span id="line249" class="lineno">249</span>                    <span class="hljs-keyword">const</span> a = part.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;:&quot;</span>);
<span id="line250" class="lineno">250</span>                    <span class="hljs-keyword">const</span> k = a[<span class="hljs-number">0</span>].<span class="hljs-title function_">trim</span>();
<span id="line251" class="lineno">251</span>                    <span class="hljs-keyword">if</span> (k &amp;&amp; a.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span>) {
<span id="line252" class="lineno">252</span>                        res[k] = a.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;:&quot;</span>).<span class="hljs-title function_">trim</span>();
<span id="line253" class="lineno">253</span>                    }
<span id="line254" class="lineno">254</span>                    <span class="hljs-keyword">return</span> res;
<span id="line255" class="lineno">255</span>                };
<span id="line256" class="lineno">256</span>                value = value.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;;&quot;</span>).<span class="hljs-title function_">reduce</span>(func, {});
<span id="line257" class="lineno">257</span>            }
<span id="line258" class="lineno">258</span>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setStyle</span>(value);
<span id="line259" class="lineno">259</span>        } <span class="hljs-keyword">else</span> {
<span id="line260" class="lineno">260</span>            <span class="hljs-keyword">const</span> isString = <span class="hljs-title function_">typeof</span>(value) == <span class="hljs-string">&quot;string&quot;</span>;
<span id="line261" class="lineno">261</span>            <span class="hljs-keyword">const</span> isBoolean = <span class="hljs-title function_">typeof</span>(value) == <span class="hljs-string">&quot;boolean&quot;</span>;
<span id="line262" class="lineno">262</span>            <span class="hljs-keyword">const</span> isNumber = <span class="hljs-title function_">typeof</span>(value) == <span class="hljs-string">&quot;number&quot;</span>;
<span id="line263" class="lineno">263</span>            <span class="hljs-keyword">if</span> (isString || isBoolean || isNumber) {
<span id="line264" class="lineno">264</span>                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setAttribute</span>(name, value);
<span id="line265" class="lineno">265</span>            } <span class="hljs-keyword">else</span> {
<span id="line266" class="lineno">266</span>                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeAttribute</span>(name);
<span id="line267" class="lineno">267</span>            }
<span id="line268" class="lineno">268</span>            <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span>) {
<span id="line269" class="lineno">269</span>                <span class="hljs-variable language_">this</span>[name] = value;
<span id="line270" class="lineno">270</span>            } <span class="hljs-keyword">else</span> {
<span id="line271" class="lineno">271</span>                <span class="hljs-keyword">delete</span> <span class="hljs-variable language_">this</span>[name];
<span id="line272" class="lineno">272</span>            }
<span id="line273" class="lineno">273</span>        }
<span id="line274" class="lineno">274</span>    }
<span id="line275" class="lineno">275</span>};
<span id="line276" class="lineno">276</span>
<span id="line277" class="lineno">277</span><span class="hljs-comment">/**
<span id="line278" class="lineno">278</span> * Updates the CSS styles of this HTML DOM node. This method is
<span id="line279" class="lineno">279</span> * identical to `MochiKit.Style.setStyle`, but uses &quot;this&quot; as the
<span id="line280" class="lineno">280</span> * first argument.
<span id="line281" class="lineno">281</span> *
<span id="line282" class="lineno">282</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} styles an object with the styles to set
<span id="line283" class="lineno">283</span> *
<span id="line284" class="lineno">284</span> * <span class="hljs-doctag">@example</span>
<span id="line285" class="lineno">285</span> * widget.setStyle({ &quot;font-size&quot;: &quot;bold&quot;, &quot;color&quot;: &quot;red&quot; });
<span id="line286" class="lineno">286</span> */</span>
<span id="line287" class="lineno">287</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">setStyle</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">styles</span>) {
<span id="line288" class="lineno">288</span>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">copyStyle</span> = (<span class="hljs-params">o, k</span>) =&gt; (o[k] = styles[k], o);
<span id="line289" class="lineno">289</span>    <span class="hljs-keyword">const</span> thisProps = [
<span id="line290" class="lineno">290</span>        <span class="hljs-string">&quot;width&quot;</span>, <span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-string">&quot;zIndex&quot;</span>, <span class="hljs-string">&quot;z-index&quot;</span>,
<span id="line291" class="lineno">291</span>        <span class="hljs-string">&quot;position&quot;</span>, <span class="hljs-string">&quot;top&quot;</span>, <span class="hljs-string">&quot;bottom&quot;</span>, <span class="hljs-string">&quot;left&quot;</span>, <span class="hljs-string">&quot;right&quot;</span>
<span id="line292" class="lineno">292</span>    ].<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">k</span>) =&gt;</span> k <span class="hljs-keyword">in</span> styles);
<span id="line293" class="lineno">293</span>    <span class="hljs-keyword">const</span> thisStyles = thisProps.<span class="hljs-title function_">reduce</span>(copyStyle, {});
<span id="line294" class="lineno">294</span>    <span class="hljs-keyword">const</span> otherProps = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(styles).<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">k</span>) =&gt;</span> !thisProps.<span class="hljs-title function_">includes</span>(k));
<span id="line295" class="lineno">295</span>    <span class="hljs-keyword">const</span> otherStyles = otherProps.<span class="hljs-title function_">reduce</span>(copyStyle, {});
<span id="line296" class="lineno">296</span>    <span class="hljs-title class_">MochiKit</span>.<span class="hljs-property">Style</span>.<span class="hljs-title function_">setStyle</span>(<span class="hljs-variable language_">this</span>, thisStyles);
<span id="line297" class="lineno">297</span>    <span class="hljs-title class_">MochiKit</span>.<span class="hljs-property">Style</span>.<span class="hljs-title function_">setStyle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_styleNode</span>(), otherStyles);
<span id="line298" class="lineno">298</span>};
<span id="line299" class="lineno">299</span>
<span id="line300" class="lineno">300</span><span class="hljs-comment">/**
<span id="line301" class="lineno">301</span> * Checks if this HTML DOM node has the specified CSS class names.
<span id="line302" class="lineno">302</span> * Note that more than one CSS class name may be checked, in which
<span id="line303" class="lineno">303</span> * case all must be present.
<span id="line304" class="lineno">304</span> *
<span id="line305" class="lineno">305</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">...(string|Array)</span>} cls the CSS class names to check
<span id="line306" class="lineno">306</span> *
<span id="line307" class="lineno">307</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">boolean</span>} `true` if all CSS classes were present, or
<span id="line308" class="lineno">308</span> *         `false` otherwise
<span id="line309" class="lineno">309</span> */</span>
<span id="line310" class="lineno">310</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasClass</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-comment">/* ... */</span></span>) {
<span id="line311" class="lineno">311</span>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">isMatch</span>(<span class="hljs-params">val</span>) {
<span id="line312" class="lineno">312</span>        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(val)) {
<span id="line313" class="lineno">313</span>            <span class="hljs-keyword">return</span> val.<span class="hljs-title function_">every</span>(isMatch);
<span id="line314" class="lineno">314</span>        } <span class="hljs-keyword">else</span> {
<span id="line315" class="lineno">315</span>            <span class="hljs-keyword">return</span> elem.<span class="hljs-property">classList</span>.<span class="hljs-title function_">contains</span>(val);
<span id="line316" class="lineno">316</span>        }
<span id="line317" class="lineno">317</span>    }
<span id="line318" class="lineno">318</span>    <span class="hljs-keyword">const</span> elem = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_styleNode</span>();
<span id="line319" class="lineno">319</span>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">arguments</span>).<span class="hljs-title function_">flatMap</span>(<span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">_toCssClass</span>).<span class="hljs-title function_">every</span>(isMatch);
<span id="line320" class="lineno">320</span>};
<span id="line321" class="lineno">321</span>
<span id="line322" class="lineno">322</span><span class="hljs-comment">/**
<span id="line323" class="lineno">323</span> * Adds the specified CSS class names to this HTML DOM node.
<span id="line324" class="lineno">324</span> *
<span id="line325" class="lineno">325</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">...(string|Array)</span>} cls the CSS class names to add
<span id="line326" class="lineno">326</span> */</span>
<span id="line327" class="lineno">327</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addClass</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-comment">/* ... */</span></span>) {
<span id="line328" class="lineno">328</span>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">val</span>) {
<span id="line329" class="lineno">329</span>        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(val)) {
<span id="line330" class="lineno">330</span>            val.<span class="hljs-title function_">forEach</span>(add);
<span id="line331" class="lineno">331</span>        } <span class="hljs-keyword">else</span> {
<span id="line332" class="lineno">332</span>            elem.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(val);
<span id="line333" class="lineno">333</span>        }
<span id="line334" class="lineno">334</span>    }
<span id="line335" class="lineno">335</span>    <span class="hljs-keyword">const</span> elem = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_styleNode</span>();
<span id="line336" class="lineno">336</span>    <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">arguments</span>).<span class="hljs-title function_">flatMap</span>(<span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">_toCssClass</span>).<span class="hljs-title function_">forEach</span>(add);
<span id="line337" class="lineno">337</span>};
<span id="line338" class="lineno">338</span>
<span id="line339" class="lineno">339</span><span class="hljs-comment">/**
<span id="line340" class="lineno">340</span> * Removes the specified CSS class names from this HTML DOM node.
<span id="line341" class="lineno">341</span> * Note that this method will not remove any class starting with
<span id="line342" class="lineno">342</span> * &quot;widget&quot;.
<span id="line343" class="lineno">343</span> *
<span id="line344" class="lineno">344</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">...(string|Array)</span>} cls the CSS class names to remove
<span id="line345" class="lineno">345</span> */</span>
<span id="line346" class="lineno">346</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">removeClass</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-comment">/* ... */</span></span>) {
<span id="line347" class="lineno">347</span>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params">val</span>) {
<span id="line348" class="lineno">348</span>        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(val)) {
<span id="line349" class="lineno">349</span>            val.<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>).<span class="hljs-title function_">forEach</span>(remove);
<span id="line350" class="lineno">350</span>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!val.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;widget&quot;</span>)) {
<span id="line351" class="lineno">351</span>            elem.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(val);
<span id="line352" class="lineno">352</span>        }
<span id="line353" class="lineno">353</span>    }
<span id="line354" class="lineno">354</span>    <span class="hljs-keyword">const</span> elem = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_styleNode</span>();
<span id="line355" class="lineno">355</span>    <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">arguments</span>).<span class="hljs-title function_">flatMap</span>(<span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">_toCssClass</span>).<span class="hljs-title function_">forEach</span>(remove);
<span id="line356" class="lineno">356</span>};
<span id="line357" class="lineno">357</span>
<span id="line358" class="lineno">358</span><span class="hljs-comment">/**
<span id="line359" class="lineno">359</span> * Toggles adding and removing the specified CSS class names to and
<span id="line360" class="lineno">360</span> * from this HTML DOM node. If all the CSS classes are already set,
<span id="line361" class="lineno">361</span> * they will be removed. Otherwise they will be added.
<span id="line362" class="lineno">362</span> *
<span id="line363" class="lineno">363</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">...(string|Array)</span>} cls the CSS class names to remove
<span id="line364" class="lineno">364</span> *
<span id="line365" class="lineno">365</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">boolean</span>} `true` if the CSS classes were added, or
<span id="line366" class="lineno">366</span> *         `false` otherwise
<span id="line367" class="lineno">367</span> */</span>
<span id="line368" class="lineno">368</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toggleClass</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-comment">/* ... */</span></span>) {
<span id="line369" class="lineno">369</span>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hasClass</span>(...<span class="hljs-variable language_">arguments</span>)) {
<span id="line370" class="lineno">370</span>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeClass</span>(...<span class="hljs-variable language_">arguments</span>);
<span id="line371" class="lineno">371</span>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
<span id="line372" class="lineno">372</span>    } <span class="hljs-keyword">else</span> {
<span id="line373" class="lineno">373</span>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addClass</span>(...<span class="hljs-variable language_">arguments</span>);
<span id="line374" class="lineno">374</span>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
<span id="line375" class="lineno">375</span>    }
<span id="line376" class="lineno">376</span>};
<span id="line377" class="lineno">377</span>
<span id="line378" class="lineno">378</span><span class="hljs-comment">/**
<span id="line379" class="lineno">379</span> * Checks if this widget is disabled. This method checks both the
<span id="line380" class="lineno">380</span> * &quot;widgetDisabled&quot; CSS class and the `disabled` property. Changes
<span id="line381" class="lineno">381</span> * to the disabled status can be made with `enable()`, `disable()` or
<span id="line382" class="lineno">382</span> * `setAttrs()`.
<span id="line383" class="lineno">383</span> *
<span id="line384" class="lineno">384</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">boolean</span>} `true` if the widget is disabled, or
<span id="line385" class="lineno">385</span> *         `false` otherwise
<span id="line386" class="lineno">386</span> */</span>
<span id="line387" class="lineno">387</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">isDisabled</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line388" class="lineno">388</span>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">disabled</span> === <span class="hljs-literal">true</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">&quot;widgetDisabled&quot;</span>);
<span id="line389" class="lineno">389</span>};
<span id="line390" class="lineno">390</span>
<span id="line391" class="lineno">391</span><span class="hljs-comment">/**
<span id="line392" class="lineno">392</span> * Performs the changes corresponding to setting the `disabled`
<span id="line393" class="lineno">393</span> * widget attribute.
<span id="line394" class="lineno">394</span> *
<span id="line395" class="lineno">395</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} value the new attribute value
<span id="line396" class="lineno">396</span> */</span>
<span id="line397" class="lineno">397</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">_setDisabled</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) {
<span id="line398" class="lineno">398</span>    value = <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Data</span>.<span class="hljs-title function_">bool</span>(value);
<span id="line399" class="lineno">399</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">toggle</span>(<span class="hljs-string">&quot;widgetDisabled&quot;</span>, value);
<span id="line400" class="lineno">400</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;disabled&quot;</span>, value);
<span id="line401" class="lineno">401</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">disabled</span> = value;
<span id="line402" class="lineno">402</span>};
<span id="line403" class="lineno">403</span>
<span id="line404" class="lineno">404</span><span class="hljs-comment">/**
<span id="line405" class="lineno">405</span> * Enables this widget if it was previously disabled. This is
<span id="line406" class="lineno">406</span> * equivalent to calling `setAttrs({ disabled: false })`.
<span id="line407" class="lineno">407</span> */</span>
<span id="line408" class="lineno">408</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">enable</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line409" class="lineno">409</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setAttrs</span>({ <span class="hljs-attr">disabled</span>: <span class="hljs-literal">false</span> });
<span id="line410" class="lineno">410</span>};
<span id="line411" class="lineno">411</span>
<span id="line412" class="lineno">412</span><span class="hljs-comment">/**
<span id="line413" class="lineno">413</span> * Disables this widget if it was previously enabled. This method is
<span id="line414" class="lineno">414</span> * equivalent to calling `setAttrs({ disabled: true })`.
<span id="line415" class="lineno">415</span> */</span>
<span id="line416" class="lineno">416</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">disable</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line417" class="lineno">417</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setAttrs</span>({ <span class="hljs-attr">disabled</span>: <span class="hljs-literal">true</span> });
<span id="line418" class="lineno">418</span>};
<span id="line419" class="lineno">419</span>
<span id="line420" class="lineno">420</span><span class="hljs-comment">/**
<span id="line421" class="lineno">421</span> * Checks if this widget node is hidden. This method checks for the
<span id="line422" class="lineno">422</span> * existence of the `widgetHidden` CSS class. It does NOT check the
<span id="line423" class="lineno">423</span> * actual widget visibility (the `display` style property set by
<span id="line424" class="lineno">424</span> * animations for example).
<span id="line425" class="lineno">425</span> *
<span id="line426" class="lineno">426</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">boolean</span>} `true` if the widget is hidden, or
<span id="line427" class="lineno">427</span> *         `false` otherwise
<span id="line428" class="lineno">428</span> */</span>
<span id="line429" class="lineno">429</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">isHidden</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line430" class="lineno">430</span>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">&quot;widgetHidden&quot;</span>);
<span id="line431" class="lineno">431</span>};
<span id="line432" class="lineno">432</span>
<span id="line433" class="lineno">433</span><span class="hljs-comment">/**
<span id="line434" class="lineno">434</span> * Performs the changes corresponding to setting the `hidden`
<span id="line435" class="lineno">435</span> * widget attribute.
<span id="line436" class="lineno">436</span> *
<span id="line437" class="lineno">437</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} value the new attribute value
<span id="line438" class="lineno">438</span> */</span>
<span id="line439" class="lineno">439</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">_setHidden</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) {
<span id="line440" class="lineno">440</span>    value = <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Data</span>.<span class="hljs-title function_">bool</span>(value);
<span id="line441" class="lineno">441</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">toggle</span>(<span class="hljs-string">&quot;widgetHidden&quot;</span>, value);
<span id="line442" class="lineno">442</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;hidden&quot;</span>, value);
<span id="line443" class="lineno">443</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hidden</span> = value;
<span id="line444" class="lineno">444</span>};
<span id="line445" class="lineno">445</span>
<span id="line446" class="lineno">446</span><span class="hljs-comment">/**
<span id="line447" class="lineno">447</span> * Shows this widget node if it was previously hidden. This method is
<span id="line448" class="lineno">448</span> * equivalent to calling `setAttrs({ hidden: false })`. It is safe
<span id="line449" class="lineno">449</span> * for all types of widgets, since it only removes the `widgetHidden`
<span id="line450" class="lineno">450</span> * CSS class instead of setting the `display` style property.
<span id="line451" class="lineno">451</span> */</span>
<span id="line452" class="lineno">452</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">show</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line453" class="lineno">453</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setAttrs</span>({ <span class="hljs-attr">hidden</span>: <span class="hljs-literal">false</span> });
<span id="line454" class="lineno">454</span>};
<span id="line455" class="lineno">455</span>
<span id="line456" class="lineno">456</span><span class="hljs-comment">/**
<span id="line457" class="lineno">457</span> * Hides this widget node if it was previously visible. This method
<span id="line458" class="lineno">458</span> * is equivalent to calling `setAttrs({ hidden: true })`. It is safe
<span id="line459" class="lineno">459</span> * for all types of widgets, since it only adds the `widgetHidden`
<span id="line460" class="lineno">460</span> * CSS class instead of setting the `display` style property.
<span id="line461" class="lineno">461</span> */</span>
<span id="line462" class="lineno">462</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hide</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line463" class="lineno">463</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setAttrs</span>({ <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> });
<span id="line464" class="lineno">464</span>};
<span id="line465" class="lineno">465</span>
<span id="line466" class="lineno">466</span><span class="hljs-comment">/**
<span id="line467" class="lineno">467</span> * Blurs (unfocuses) this DOM node and all relevant child nodes. This function
<span id="line468" class="lineno">468</span> * will recursively blur all `&lt;a&gt;`, `&lt;button&gt;`, `&lt;input&gt;`, `&lt;textarea&gt;` and
<span id="line469" class="lineno">469</span> * `&lt;select&gt;` child nodes found.
<span id="line470" class="lineno">470</span> */</span>
<span id="line471" class="lineno">471</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">blurAll</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line472" class="lineno">472</span>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">activeElement</span>)) {
<span id="line473" class="lineno">473</span>        <span class="hljs-variable language_">document</span>.<span class="hljs-property">activeElement</span>.<span class="hljs-title function_">blur</span>();
<span id="line474" class="lineno">474</span>    }
<span id="line475" class="lineno">475</span>};
<span id="line476" class="lineno">476</span>
<span id="line477" class="lineno">477</span><span class="hljs-comment">/**
<span id="line478" class="lineno">478</span> * Returns an array with all child DOM nodes. Note that the array is
<span id="line479" class="lineno">479</span> * a real JavaScript array, not a dynamic `NodeList`. This method is
<span id="line480" class="lineno">480</span> * sometimes overridden by child widgets in order to hide
<span id="line481" class="lineno">481</span> * intermediate DOM nodes required by the widget.
<span id="line482" class="lineno">482</span> *
<span id="line483" class="lineno">483</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Array</span>} the array of child DOM nodes
<span id="line484" class="lineno">484</span> */</span>
<span id="line485" class="lineno">485</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getChildNodes</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line486" class="lineno">486</span>    <span class="hljs-keyword">const</span> elem = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_containerNode</span>();
<span id="line487" class="lineno">487</span>    <span class="hljs-keyword">return</span> elem ? <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(elem.<span class="hljs-property">childNodes</span>) : [];
<span id="line488" class="lineno">488</span>};
<span id="line489" class="lineno">489</span>
<span id="line490" class="lineno">490</span><span class="hljs-comment">/**
<span id="line491" class="lineno">491</span> * Adds a single child DOM node to this widget. This method is
<span id="line492" class="lineno">492</span> * sometimes overridden by child widgets in order to hide or control
<span id="line493" class="lineno">493</span> * intermediate DOM nodes required by the widget.
<span id="line494" class="lineno">494</span> *
<span id="line495" class="lineno">495</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Widget|Node</span>} child the DOM node to add
<span id="line496" class="lineno">496</span> */</span>
<span id="line497" class="lineno">497</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addChildNode</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">child</span>) {
<span id="line498" class="lineno">498</span>    <span class="hljs-keyword">const</span> elem = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_containerNode</span>();
<span id="line499" class="lineno">499</span>    <span class="hljs-keyword">if</span> (elem) {
<span id="line500" class="lineno">500</span>        elem.<span class="hljs-title function_">append</span>(child);
<span id="line501" class="lineno">501</span>    } <span class="hljs-keyword">else</span> {
<span id="line502" class="lineno">502</span>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;cannot add child node, widget is not a container&quot;</span>);
<span id="line503" class="lineno">503</span>    }
<span id="line504" class="lineno">504</span>};
<span id="line505" class="lineno">505</span>
<span id="line506" class="lineno">506</span><span class="hljs-comment">/**
<span id="line507" class="lineno">507</span> * Removes a single child DOM node from this widget. This method is
<span id="line508" class="lineno">508</span> * sometimes overridden by child widgets in order to hide or control
<span id="line509" class="lineno">509</span> * intermediate DOM nodes required by the widget.
<span id="line510" class="lineno">510</span> *
<span id="line511" class="lineno">511</span> * Note that this method will NOT destroy the removed child widget,
<span id="line512" class="lineno">512</span> * so care must be taken to ensure proper child widget destruction.
<span id="line513" class="lineno">513</span> *
<span id="line514" class="lineno">514</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Widget|Node</span>} child the DOM node to remove
<span id="line515" class="lineno">515</span> */</span>
<span id="line516" class="lineno">516</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">removeChildNode</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">child</span>) {
<span id="line517" class="lineno">517</span>    <span class="hljs-keyword">const</span> elem = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_containerNode</span>();
<span id="line518" class="lineno">518</span>    <span class="hljs-keyword">if</span> (elem) {
<span id="line519" class="lineno">519</span>        elem.<span class="hljs-title function_">removeChild</span>(child);
<span id="line520" class="lineno">520</span>    }
<span id="line521" class="lineno">521</span>};
<span id="line522" class="lineno">522</span>
<span id="line523" class="lineno">523</span><span class="hljs-comment">/**
<span id="line524" class="lineno">524</span> * Adds one or more children to this widget. This method will flatten any
<span id="line525" class="lineno">525</span> * arrays among the arguments and ignores any `null` or `undefined` arguments.
<span id="line526" class="lineno">526</span> * Any DOM nodes or widgets will be added to the end, and other objects will be
<span id="line527" class="lineno">527</span> * converted to a text node first. Subclasses should normally override the
<span id="line528" class="lineno">528</span> * `addChildNode()` method instead of this one, since that is the basis for
<span id="line529" class="lineno">529</span> * DOM node insertion.
<span id="line530" class="lineno">530</span> *
<span id="line531" class="lineno">531</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">...(string|Node|Array)</span>} child the children to add
<span id="line532" class="lineno">532</span> */</span>
<span id="line533" class="lineno">533</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addAll</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...children</span>) {
<span id="line534" class="lineno">534</span>    [].<span class="hljs-title function_">concat</span>(...children).<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">o</span>) =&gt;</span> o != <span class="hljs-literal">null</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> {
<span id="line535" class="lineno">535</span>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addChildNode</span>(child);
<span id="line536" class="lineno">536</span>    });
<span id="line537" class="lineno">537</span>};
<span id="line538" class="lineno">538</span>
<span id="line539" class="lineno">539</span><span class="hljs-comment">/**
<span id="line540" class="lineno">540</span> * Removes all children to this widget. This method will also destroy and child
<span id="line541" class="lineno">541</span> * widgets and disconnect all signal listeners. This method uses the
<span id="line542" class="lineno">542</span> * `getChildNodes()` and `removeChildNode()` methods to find and remove the
<span id="line543" class="lineno">543</span> * individual child nodes.
<span id="line544" class="lineno">544</span> */</span>
<span id="line545" class="lineno">545</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">removeAll</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line546" class="lineno">546</span>    <span class="hljs-keyword">const</span> children = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getChildNodes</span>();
<span id="line547" class="lineno">547</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = children.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
<span id="line548" class="lineno">548</span>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeChildNode</span>(children[i]);
<span id="line549" class="lineno">549</span>        <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-title function_">destroyWidget</span>(children[i]);
<span id="line550" class="lineno">550</span>    }
<span id="line551" class="lineno">551</span>};
<span id="line552" class="lineno">552</span></code></pre>
        </article>
    </section>





      </div>
    </section>

    <section class="footer center fineprint">
      <hr>
      Copyright &copy; 2007-2026 Per Cederberg. All rights reserved.
    </section>

  </body>
</html>
