
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="JsDoc" />
    <link rel="stylesheet" href="../css/style.css" type="text/css">
    <link rel="stylesheet" href="../css/doc.css" type="text/css">
    <link rel="stylesheet" href="../css/font-awesome-4.7.0.min.css" type="text/css">
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../images/logotype-icon.ico">
    <link rel="icon" type="image/png" sizes="256x256" href="../images/logotype-icon-256x256.png">
    <link rel="apple-touch-icon" sizes="256x256" href="../images/logotype-icon-256x256.png">
    <title>RapidContext :: JavaScript API</title>
  </head>
  <body class="doc">

    <section class="header">
      <div class="center">
        <a href="https://www.rapidcontext.com/" class="logotype">
          <img src="../images/logotype.png" />
        </a>
        <div class="text">
          <a href="https://www.rapidcontext.com/">
            <span style="font-size: 3.6em;">RapidContext</span><br>
            <span style="font-size: 1.75em; color: #caf3ff;">Access &#183; Discovery &#183; Insight</span><br>
            <span style="font-size: 1.3em; letter-spacing: 0.34em; line-height: 1.8em;">www.rapidcontext.com</span>
          </a>
        </div>
      </div>
      <div class="menu">
        <a href="https://www.rapidcontext.com/doc/index.html">Docs</a>
        &bull; <a href="https://github.com/cederberg/rapidcontext/releases">Downloads</a>
        &bull; <a href="https://github.com/cederberg/rapidcontext">Project</a>
      </div>
    </section>

    <section class="content center">
      <ol class="breadcrumb">
        <li><a href="../index.html">Documentation</a></li>

        <li><a href="index.html">JavaScript API</a></li>
        <li class="active">rapidcontext/ui/msg.mjs</li>

      </ol>

      <div class="jsdoc">
        <h1 class="classTitle">Source rapidcontext/ui/msg.mjs</h1>




    <section>
        <article>
            <pre><code class="hljs language-js"><span id="line1" class="lineno">1</span><span class="hljs-comment">/*
<span id="line2" class="lineno">2</span> * RapidContext &lt;https://www.rapidcontext.com/&gt;
<span id="line3" class="lineno">3</span> * Copyright (c) 2007-2025 Per Cederberg. All rights reserved.
<span id="line4" class="lineno">4</span> *
<span id="line5" class="lineno">5</span> * This program is free software: you can redistribute it and/or
<span id="line6" class="lineno">6</span> * modify it under the terms of the BSD license.
<span id="line7" class="lineno">7</span> *
<span id="line8" class="lineno">8</span> * This program is distributed in the hope that it will be useful,
<span id="line9" class="lineno">9</span> * but WITHOUT ANY WARRANTY; without even the implied warranty of
<span id="line10" class="lineno">10</span> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
<span id="line11" class="lineno">11</span> *
<span id="line12" class="lineno">12</span> * See the RapidContext LICENSE for more details.
<span id="line13" class="lineno">13</span> */</span>
<span id="line14" class="lineno">14</span>
<span id="line15" class="lineno">15</span><span class="hljs-comment">/**
<span id="line16" class="lineno">16</span> * Provides common message dialogs.
<span id="line17" class="lineno">17</span> * <span class="hljs-doctag">@namespace</span> RapidContext.UI.Msg
<span id="line18" class="lineno">18</span> */</span>
<span id="line19" class="lineno">19</span>
<span id="line20" class="lineno">20</span><span class="hljs-comment">/**
<span id="line21" class="lineno">21</span> * The message actions (i.e. buttons) to show in the message dialog. Each
<span id="line22" class="lineno">22</span> * action corresponds to a result value returned by the message promise.
<span id="line23" class="lineno">23</span> * The action values `cancel` and `reload` are handled specially, as they
<span id="line24" class="lineno">24</span> * either reject the promise or reload the page altogether.
<span id="line25" class="lineno">25</span> *
<span id="line26" class="lineno">26</span> * Each action button can either use default styles, or be configured with
<span id="line27" class="lineno">27</span> * an options object. By default, the action key is used as both the
<span id="line28" class="lineno">28</span> * default button type (e.g. `primary`, `danger`, `info` or `success`), and
<span id="line29" class="lineno">29</span> * the returned action value.
<span id="line30" class="lineno">30</span> *
<span id="line31" class="lineno">31</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string|Object</span>} * the action text or options object
<span id="line32" class="lineno">32</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [*.text] the button text to show
<span id="line33" class="lineno">33</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [*.icon] the button icon to show
<span id="line34" class="lineno">34</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [*.css] the button CSS classes or styles, uses action key by default
<span id="line35" class="lineno">35</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [*.action] the action return value, uses action key by default
<span id="line36" class="lineno">36</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [*.href] the URL to follow if selected
<span id="line37" class="lineno">37</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [*.target] the link target (e.g. `_blank`)
<span id="line38" class="lineno">38</span> * <span class="hljs-doctag">@typedef</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">Actions</span>
<span id="line39" class="lineno">39</span> * <span class="hljs-doctag">@memberof</span> RapidContext.UI.Msg
<span id="line40" class="lineno">40</span> *
<span id="line41" class="lineno">41</span> * <span class="hljs-doctag">@example</span>
<span id="line42" class="lineno">42</span> * {
<span id="line43" class="lineno">43</span> *    // Actions can use either default styles or configuration
<span id="line44" class="lineno">44</span> *    danger: &quot;Yes, I know what I&#x27;m doing&quot;,
<span id="line45" class="lineno">45</span> *    custom: { text: &quot;Ok&quot;, icon: &quot;fa fa-lg fa-check&quot;, css: &#x27;primary&#x27; },
<span id="line46" class="lineno">46</span> *
<span id="line47" class="lineno">47</span> *    // The special &#x27;cancel&#x27; action rejects the returned promise
<span id="line48" class="lineno">48</span> *    cancel: { text: &quot;Cancel&quot;, icon: &quot;fa fa-lg fa-times&quot; },
<span id="line49" class="lineno">49</span> *
<span id="line50" class="lineno">50</span> *    // The &#x27;reload&#x27; action triggers a reload of the current page
<span id="line51" class="lineno">51</span> *    reload: { text: &quot;Reload page&quot; }
<span id="line52" class="lineno">52</span> * }
<span id="line53" class="lineno">53</span> */</span>
<span id="line54" class="lineno">54</span><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TYPES</span> = {
<span id="line55" class="lineno">55</span>    <span class="hljs-string">&#x27;error&#x27;</span>: {
<span id="line56" class="lineno">56</span>        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Error&#x27;</span>,
<span id="line57" class="lineno">57</span>        <span class="hljs-attr">css</span>: <span class="hljs-string">&#x27;danger&#x27;</span>,
<span id="line58" class="lineno">58</span>        <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;An error message&#x27;</span>,
<span id="line59" class="lineno">59</span>        <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;fa fa-minus-circle color-danger&#x27;</span>,
<span id="line60" class="lineno">60</span>        <span class="hljs-attr">actions</span>: {
<span id="line61" class="lineno">61</span>            <span class="hljs-attr">danger</span>: { <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;fa fa-lg fa-bolt&#x27;</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Ok, I understand&#x27;</span> }
<span id="line62" class="lineno">62</span>        }
<span id="line63" class="lineno">63</span>    },
<span id="line64" class="lineno">64</span>    <span class="hljs-string">&#x27;warning&#x27;</span>: {
<span id="line65" class="lineno">65</span>        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Warning&#x27;</span>,
<span id="line66" class="lineno">66</span>        <span class="hljs-attr">css</span>: <span class="hljs-string">&#x27;warning&#x27;</span>,
<span id="line67" class="lineno">67</span>        <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;A warning message&#x27;</span>,
<span id="line68" class="lineno">68</span>        <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;fa fa-exclamation-triangle color-warning&#x27;</span>,
<span id="line69" class="lineno">69</span>        <span class="hljs-attr">actions</span>: {
<span id="line70" class="lineno">70</span>            <span class="hljs-attr">warning</span>: { <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;fa fa-lg fa-check&#x27;</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Ok, I understand&#x27;</span> }
<span id="line71" class="lineno">71</span>        }
<span id="line72" class="lineno">72</span>    },
<span id="line73" class="lineno">73</span>    <span class="hljs-string">&#x27;success&#x27;</span>: {
<span id="line74" class="lineno">74</span>        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Success&#x27;</span>,
<span id="line75" class="lineno">75</span>        <span class="hljs-attr">css</span>: <span class="hljs-string">&#x27;success&#x27;</span>,
<span id="line76" class="lineno">76</span>        <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;A success message&#x27;</span>,
<span id="line77" class="lineno">77</span>        <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;fa fa-check color-success&#x27;</span>,
<span id="line78" class="lineno">78</span>        <span class="hljs-attr">actions</span>: {
<span id="line79" class="lineno">79</span>            <span class="hljs-attr">success</span>: { <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;fa fa-lg fa-check&#x27;</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Ok, got it&#x27;</span> }
<span id="line80" class="lineno">80</span>        }
<span id="line81" class="lineno">81</span>    },
<span id="line82" class="lineno">82</span>    <span class="hljs-string">&#x27;info&#x27;</span>: {
<span id="line83" class="lineno">83</span>        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Information&#x27;</span>,
<span id="line84" class="lineno">84</span>        <span class="hljs-attr">css</span>: <span class="hljs-string">&#x27;info&#x27;</span>,
<span id="line85" class="lineno">85</span>        <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;An information message&#x27;</span>,
<span id="line86" class="lineno">86</span>        <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;fa fa-info-circle color-info&#x27;</span>,
<span id="line87" class="lineno">87</span>        <span class="hljs-attr">actions</span>: {
<span id="line88" class="lineno">88</span>            <span class="hljs-attr">info</span>: { <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;fa fa-lg fa-check&#x27;</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Ok, got it&#x27;</span> }
<span id="line89" class="lineno">89</span>        }
<span id="line90" class="lineno">90</span>    }
<span id="line91" class="lineno">91</span>};
<span id="line92" class="lineno">92</span>
<span id="line93" class="lineno">93</span><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">XML</span> = <span class="hljs-string">`
<span id="line94" class="lineno">94</span>    &lt;Dialog system=&#x27;true&#x27; closeable=&#x27;false&#x27; class=&#x27;position-relative&#x27; style=&#x27;width: 25rem;&#x27;&gt;
<span id="line95" class="lineno">95</span>      &lt;i class=&#x27;ui-msg-icon position-absolute top-0 left-0 fa fa-fw fa-3x px-1 py-2&#x27;&gt;&lt;/i&gt;
<span id="line96" class="lineno">96</span>      &lt;div class=&#x27;ui-msg-text&#x27; style=&#x27;padding: 0.5em 0 1em 4.5em;&#x27;&gt;
<span id="line97" class="lineno">97</span>      &lt;/div&gt;
<span id="line98" class="lineno">98</span>      &lt;div class=&#x27;ui-msg-btns text-right mt-1&#x27;&gt;
<span id="line99" class="lineno">99</span>      &lt;/div&gt;
<span id="line100" class="lineno">100</span>    &lt;/Dialog&gt;
<span id="line101" class="lineno">101</span>`</span>.<span class="hljs-title function_">trim</span>();
<span id="line102" class="lineno">102</span>
<span id="line103" class="lineno">103</span><span class="hljs-keyword">function</span> <span class="hljs-title function_">isObject</span>(<span class="hljs-params">o</span>) {
<span id="line104" class="lineno">104</span>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(o) === <span class="hljs-string">&#x27;[object Object]&#x27;</span>;
<span id="line105" class="lineno">105</span>}
<span id="line106" class="lineno">106</span>
<span id="line107" class="lineno">107</span><span class="hljs-keyword">function</span> <span class="hljs-title function_">show</span>(<span class="hljs-params">type, cfg</span>) {
<span id="line108" class="lineno">108</span>    cfg = { ...<span class="hljs-variable constant_">TYPES</span>[type], ...(<span class="hljs-title function_">isObject</span>(cfg) ? cfg : { <span class="hljs-attr">text</span>: <span class="hljs-title class_">String</span>(cfg) }) };
<span id="line109" class="lineno">109</span>    <span class="hljs-keyword">const</span> dlg = <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">UI</span>.<span class="hljs-title function_">create</span>(<span class="hljs-variable constant_">XML</span>);
<span id="line110" class="lineno">110</span>    dlg.<span class="hljs-title function_">setAttrs</span>({ <span class="hljs-attr">title</span>: cfg.<span class="hljs-property">title</span> });
<span id="line111" class="lineno">111</span>    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isObject</span>(cfg.<span class="hljs-property">css</span>) || <span class="hljs-regexp">/:/</span>.<span class="hljs-title function_">test</span>(cfg.<span class="hljs-property">css</span>)) {
<span id="line112" class="lineno">112</span>        dlg.<span class="hljs-title function_">setAttrs</span>({ <span class="hljs-attr">style</span>: cfg.<span class="hljs-property">css</span> });
<span id="line113" class="lineno">113</span>    } <span class="hljs-keyword">else</span> {
<span id="line114" class="lineno">114</span>        dlg.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(...cfg.<span class="hljs-property">css</span>.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\s+/g</span>));
<span id="line115" class="lineno">115</span>    }
<span id="line116" class="lineno">116</span>    dlg.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.ui-msg-icon&#x27;</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(...cfg.<span class="hljs-property">icon</span>.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\s+/g</span>));
<span id="line117" class="lineno">117</span>    <span class="hljs-keyword">if</span> (cfg.<span class="hljs-property">html</span> &amp;&amp; cfg.<span class="hljs-property">html</span>.<span class="hljs-property">nodeType</span> &gt; <span class="hljs-number">0</span>) {
<span id="line118" class="lineno">118</span>        <span class="hljs-comment">// <span class="hljs-doctag">FIXME:</span> Use replaceChildren(..) instead</span>
<span id="line119" class="lineno">119</span>        dlg.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.ui-msg-text&#x27;</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;&#x27;</span>;
<span id="line120" class="lineno">120</span>        dlg.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.ui-msg-text&#x27;</span>).<span class="hljs-title function_">append</span>(cfg.<span class="hljs-property">html</span>);
<span id="line121" class="lineno">121</span>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cfg.<span class="hljs-property">html</span>) {
<span id="line122" class="lineno">122</span>        dlg.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.ui-msg-text&#x27;</span>).<span class="hljs-property">innerHTML</span> = cfg.<span class="hljs-property">html</span>;
<span id="line123" class="lineno">123</span>    } <span class="hljs-keyword">else</span> {
<span id="line124" class="lineno">124</span>        dlg.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.ui-msg-text&#x27;</span>).<span class="hljs-property">innerText</span> = cfg.<span class="hljs-property">text</span>;
<span id="line125" class="lineno">125</span>    }
<span id="line126" class="lineno">126</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> cfg.<span class="hljs-property">actions</span>) {
<span id="line127" class="lineno">127</span>        <span class="hljs-keyword">const</span> act = <span class="hljs-title function_">normalizeAction</span>(key, cfg.<span class="hljs-property">actions</span>[key]);
<span id="line128" class="lineno">128</span>        <span class="hljs-keyword">const</span> btn = <span class="hljs-title function_">createButton</span>(act);
<span id="line129" class="lineno">129</span>        <span class="hljs-keyword">if</span> (act.<span class="hljs-property">css</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;:&#x27;</span>)) {
<span id="line130" class="lineno">130</span>            btn.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = act.<span class="hljs-property">css</span>;
<span id="line131" class="lineno">131</span>        } <span class="hljs-keyword">else</span> {
<span id="line132" class="lineno">132</span>            btn.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(...act.<span class="hljs-property">css</span>.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\s+/g</span>));
<span id="line133" class="lineno">133</span>        }
<span id="line134" class="lineno">134</span>        btn.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;data-action&#x27;</span>, act.<span class="hljs-property">action</span>);
<span id="line135" class="lineno">135</span>        <span class="hljs-keyword">if</span> (act.<span class="hljs-property">icon</span> || act.<span class="hljs-property">href</span>) {
<span id="line136" class="lineno">136</span>            <span class="hljs-keyword">const</span> icon = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;i&#x27;</span>);
<span id="line137" class="lineno">137</span>            icon.<span class="hljs-property">className</span> = act.<span class="hljs-property">icon</span> || <span class="hljs-string">&#x27;fa fa-arrow-right&#x27;</span>;
<span id="line138" class="lineno">138</span>            btn.<span class="hljs-title function_">append</span>(icon);
<span id="line139" class="lineno">139</span>        }
<span id="line140" class="lineno">140</span>        <span class="hljs-keyword">if</span> (act.<span class="hljs-property">text</span>) {
<span id="line141" class="lineno">141</span>            <span class="hljs-keyword">const</span> span = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;span&#x27;</span>);
<span id="line142" class="lineno">142</span>            span.<span class="hljs-property">innerText</span> = act.<span class="hljs-property">text</span>;
<span id="line143" class="lineno">143</span>            btn.<span class="hljs-title function_">append</span>(span);
<span id="line144" class="lineno">144</span>        }
<span id="line145" class="lineno">145</span>        dlg.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.ui-msg-btns&#x27;</span>).<span class="hljs-title function_">append</span>(btn);
<span id="line146" class="lineno">146</span>    }
<span id="line147" class="lineno">147</span>    <span class="hljs-keyword">const</span> promise = <span class="hljs-title function_">createEventHandler</span>(dlg);
<span id="line148" class="lineno">148</span>    promise.<span class="hljs-property">dialog</span> = dlg;
<span id="line149" class="lineno">149</span>    promise.<span class="hljs-property">content</span> = dlg.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.ui-msg-text&#x27;</span>);
<span id="line150" class="lineno">150</span>    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">append</span>(dlg);
<span id="line151" class="lineno">151</span>    dlg.<span class="hljs-title function_">show</span>();
<span id="line152" class="lineno">152</span>    <span class="hljs-keyword">return</span> promise;
<span id="line153" class="lineno">153</span>}
<span id="line154" class="lineno">154</span>
<span id="line155" class="lineno">155</span><span class="hljs-keyword">function</span> <span class="hljs-title function_">normalizeAction</span>(<span class="hljs-params">key, val</span>) {
<span id="line156" class="lineno">156</span>    val = <span class="hljs-title function_">isObject</span>(val) ? val : { <span class="hljs-attr">text</span>: <span class="hljs-title class_">String</span>(val) };
<span id="line157" class="lineno">157</span>    <span class="hljs-keyword">if</span> (key === <span class="hljs-string">&#x27;reload&#x27;</span> || val.<span class="hljs-property">action</span> === <span class="hljs-string">&#x27;reload&#x27;</span>) {
<span id="line158" class="lineno">158</span>        <span class="hljs-keyword">const</span> href = <span class="hljs-string">&#x27;javascript:window.location.reload();&#x27;</span>;
<span id="line159" class="lineno">159</span>        <span class="hljs-keyword">const</span> css = val.<span class="hljs-property">css</span> || <span class="hljs-string">&#x27;danger&#x27;</span>;
<span id="line160" class="lineno">160</span>        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(val, { href, <span class="hljs-attr">target</span>: <span class="hljs-literal">null</span>, css, <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;fa fa-refresh&#x27;</span> });
<span id="line161" class="lineno">161</span>    }
<span id="line162" class="lineno">162</span>    val.<span class="hljs-property">css</span> = val.<span class="hljs-property">css</span> || key;
<span id="line163" class="lineno">163</span>    val.<span class="hljs-property">action</span> = val.<span class="hljs-property">action</span> || key;
<span id="line164" class="lineno">164</span>    <span class="hljs-keyword">return</span> val;
<span id="line165" class="lineno">165</span>}
<span id="line166" class="lineno">166</span>
<span id="line167" class="lineno">167</span><span class="hljs-keyword">function</span> <span class="hljs-title function_">createButton</span>(<span class="hljs-params">act</span>) {
<span id="line168" class="lineno">168</span>    <span class="hljs-keyword">if</span> (act.<span class="hljs-property">href</span>) {
<span id="line169" class="lineno">169</span>        <span class="hljs-keyword">const</span> el = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;a&#x27;</span>);
<span id="line170" class="lineno">170</span>        el.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;href&#x27;</span>, act.<span class="hljs-property">href</span>);
<span id="line171" class="lineno">171</span>        <span class="hljs-keyword">if</span> (act.<span class="hljs-property">target</span> != <span class="hljs-literal">null</span> &amp;&amp; act.<span class="hljs-property">target</span> !== <span class="hljs-literal">false</span>) {
<span id="line172" class="lineno">172</span>            el.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;target&#x27;</span>, act.<span class="hljs-property">target</span> || <span class="hljs-string">&#x27;_blank&#x27;</span>);
<span id="line173" class="lineno">173</span>        }
<span id="line174" class="lineno">174</span>        el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;btn&#x27;</span>);
<span id="line175" class="lineno">175</span>        <span class="hljs-keyword">return</span> el;
<span id="line176" class="lineno">176</span>    } <span class="hljs-keyword">else</span> {
<span id="line177" class="lineno">177</span>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;button&#x27;</span>);
<span id="line178" class="lineno">178</span>    }
<span id="line179" class="lineno">179</span>}
<span id="line180" class="lineno">180</span>
<span id="line181" class="lineno">181</span><span class="hljs-keyword">function</span> <span class="hljs-title function_">createEventHandler</span>(<span class="hljs-params">dlg</span>) {
<span id="line182" class="lineno">182</span>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) {
<span id="line183" class="lineno">183</span>        <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params">evt</span>) =&gt; {
<span id="line184" class="lineno">184</span>            <span class="hljs-keyword">const</span> action = evt.<span class="hljs-property">delegateTarget</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">action</span>;
<span id="line185" class="lineno">185</span>            <span class="hljs-keyword">if</span> (action) {
<span id="line186" class="lineno">186</span>                dlg.<span class="hljs-title function_">hide</span>();
<span id="line187" class="lineno">187</span>                <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-title function_">destroyWidget</span>(dlg);
<span id="line188" class="lineno">188</span>                <span class="hljs-keyword">if</span> (action === <span class="hljs-string">&#x27;cancel&#x27;</span>) {
<span id="line189" class="lineno">189</span>                    <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;operation cancelled&#x27;</span>));
<span id="line190" class="lineno">190</span>                } <span class="hljs-keyword">else</span> {
<span id="line191" class="lineno">191</span>                    <span class="hljs-title function_">resolve</span>(action);
<span id="line192" class="lineno">192</span>                }
<span id="line193" class="lineno">193</span>            }
<span id="line194" class="lineno">194</span>        };
<span id="line195" class="lineno">195</span>        dlg.<span class="hljs-title function_">once</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-string">&#x27;.ui-msg-btns [data-action]&#x27;</span>, handler);
<span id="line196" class="lineno">196</span>    });
<span id="line197" class="lineno">197</span>}
<span id="line198" class="lineno">198</span>
<span id="line199" class="lineno">199</span><span class="hljs-comment">/**
<span id="line200" class="lineno">200</span> * Displays a modal error dialog, similar to `alert()`. By default a
<span id="line201" class="lineno">201</span> * single action is shown to close the dialog, but use the `actions`
<span id="line202" class="lineno">202</span> * options to configure otherwise. The returned promise resolves with the
<span id="line203" class="lineno">203</span> * action selected by the user.
<span id="line204" class="lineno">204</span> *
<span id="line205" class="lineno">205</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string|Object</span>} msg the message text or message configuration options
<span id="line206" class="lineno">206</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [msg.title=&quot;Error&quot;] the dialog title
<span id="line207" class="lineno">207</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [msg.text=&quot;An error message&quot;] the message text
<span id="line208" class="lineno">208</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string|Node</span>} [msg.html] the message in HTML format
<span id="line209" class="lineno">209</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [msg.css] the dialog css
<span id="line210" class="lineno">210</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Actions</span>} [msg.actions] the action buttons to show
<span id="line211" class="lineno">211</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Promise</span>} a promise that resolves with the selected action
<span id="line212" class="lineno">212</span> * <span class="hljs-doctag">@function</span> RapidContext.UI.Msg.error
<span id="line213" class="lineno">213</span> *
<span id="line214" class="lineno">214</span> * <span class="hljs-doctag">@example</span>
<span id="line215" class="lineno">215</span> * try {
<span id="line216" class="lineno">216</span> *     ...
<span id="line217" class="lineno">217</span> * } catch (e) {
<span id="line218" class="lineno">218</span> *     await RapidContext.UI.Msg.error(e.toString());
<span id="line219" class="lineno">219</span> * }
<span id="line220" class="lineno">220</span> */</span>
<span id="line221" class="lineno">221</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> error = show.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&#x27;error&#x27;</span>);
<span id="line222" class="lineno">222</span>
<span id="line223" class="lineno">223</span><span class="hljs-comment">/**
<span id="line224" class="lineno">224</span> * Displays a modal warning dialog, similar to `alert()`. By default a
<span id="line225" class="lineno">225</span> * single action is shown to close the dialog, but use the `actions`
<span id="line226" class="lineno">226</span> * options to configure otherwise. The returned promise resolves with the
<span id="line227" class="lineno">227</span> * action selected by the user.
<span id="line228" class="lineno">228</span> *
<span id="line229" class="lineno">229</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string|Object</span>} msg the message text or message configuration options
<span id="line230" class="lineno">230</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [msg.title=&quot;Warning&quot;] the dialog title
<span id="line231" class="lineno">231</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [msg.text=&quot;A warning message&quot;] the message text
<span id="line232" class="lineno">232</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string|Node</span>} [msg.html] the message in HTML format
<span id="line233" class="lineno">233</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [msg.css] the dialog css
<span id="line234" class="lineno">234</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Actions</span>} [msg.actions] the action buttons to show
<span id="line235" class="lineno">235</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Promise</span>} a promise that resolves with the selected action
<span id="line236" class="lineno">236</span> * <span class="hljs-doctag">@function</span> RapidContext.UI.Msg.warning
<span id="line237" class="lineno">237</span> *
<span id="line238" class="lineno">238</span> * <span class="hljs-doctag">@example</span>
<span id="line239" class="lineno">239</span> * let text = &quot;This will take some time to complete. Are you sure?&quot;;
<span id="line240" class="lineno">240</span> * let actions = {
<span id="line241" class="lineno">241</span> *     cancel: &quot;No, I&#x27;ve changed my mind&quot;,
<span id="line242" class="lineno">242</span> *     warning: &quot;Yes, I understand&quot;
<span id="line243" class="lineno">243</span> * }
<span id="line244" class="lineno">244</span> * RapidContext.UI.Msg.warning({ text, actions }).then(...);
<span id="line245" class="lineno">245</span> */</span>
<span id="line246" class="lineno">246</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> warning = show.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&#x27;warning&#x27;</span>);
<span id="line247" class="lineno">247</span>
<span id="line248" class="lineno">248</span><span class="hljs-comment">/**
<span id="line249" class="lineno">249</span> * Displays a modal success dialog, similar to `alert()`. By default a
<span id="line250" class="lineno">250</span> * single action is shown to close the dialog, but use the `actions`
<span id="line251" class="lineno">251</span> * options to configure otherwise. The returned promise resolves with the
<span id="line252" class="lineno">252</span> * action selected by the user.
<span id="line253" class="lineno">253</span> *
<span id="line254" class="lineno">254</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string|Object</span>} msg the message text or message configuration options
<span id="line255" class="lineno">255</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [msg.title=&quot;Success&quot;] the dialog title
<span id="line256" class="lineno">256</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [msg.text=&quot;A success message&quot;] the message text
<span id="line257" class="lineno">257</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string|Node</span>} [msg.html] the message in HTML format
<span id="line258" class="lineno">258</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [msg.css] the dialog css
<span id="line259" class="lineno">259</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Actions</span>} [msg.actions] the action buttons to show
<span id="line260" class="lineno">260</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Promise</span>} a promise that resolves with the selected action
<span id="line261" class="lineno">261</span> * <span class="hljs-doctag">@function</span> RapidContext.UI.Msg.success
<span id="line262" class="lineno">262</span> *
<span id="line263" class="lineno">263</span> * <span class="hljs-doctag">@example</span>
<span id="line264" class="lineno">264</span> * RapidContext.UI.Msg.success(&quot;Everything is proceeding as planned.&quot;);
<span id="line265" class="lineno">265</span> */</span>
<span id="line266" class="lineno">266</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> success = show.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&#x27;success&#x27;</span>);
<span id="line267" class="lineno">267</span>
<span id="line268" class="lineno">268</span><span class="hljs-comment">/**
<span id="line269" class="lineno">269</span> * Displays a modal info dialog, similar to `alert()`. By default a
<span id="line270" class="lineno">270</span> * single action is shown to close the dialog, but use the `actions`
<span id="line271" class="lineno">271</span> * options to configure otherwise. The returned promise resolves with the
<span id="line272" class="lineno">272</span> * action selected by the user.
<span id="line273" class="lineno">273</span> *
<span id="line274" class="lineno">274</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string|Object</span>} msg the message text or message configuration options
<span id="line275" class="lineno">275</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [msg.title=&quot;Information&quot;] the dialog title
<span id="line276" class="lineno">276</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [msg.text=&quot;An information message&quot;] the message text
<span id="line277" class="lineno">277</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string|Node</span>} [msg.html] the message in HTML format
<span id="line278" class="lineno">278</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [msg.css] the dialog css
<span id="line279" class="lineno">279</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Actions</span>} [msg.actions] the action buttons to show
<span id="line280" class="lineno">280</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Promise</span>} a promise that resolves with the selected action
<span id="line281" class="lineno">281</span> * <span class="hljs-doctag">@function</span> RapidContext.UI.Msg.info
<span id="line282" class="lineno">282</span> *
<span id="line283" class="lineno">283</span> * <span class="hljs-doctag">@example</span>
<span id="line284" class="lineno">284</span> * await RapidContext.UI.Msg.info(&quot;System will now reboot. Please wait.&quot;);
<span id="line285" class="lineno">285</span> * ...
<span id="line286" class="lineno">286</span> */</span>
<span id="line287" class="lineno">287</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> info = show.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&#x27;info&#x27;</span>);
<span id="line288" class="lineno">288</span>
<span id="line289" class="lineno">289</span><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(error, {
<span id="line290" class="lineno">290</span>    <span class="hljs-title function_">loggedOut</span>(<span class="hljs-params"></span>) {
<span id="line291" class="lineno">291</span>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">error</span>({
<span id="line292" class="lineno">292</span>            <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Logged out&#x27;</span>,
<span id="line293" class="lineno">293</span>            <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;You\&#x27;ve been logged out. Please reload the page to login again.&#x27;</span>,
<span id="line294" class="lineno">294</span>            <span class="hljs-attr">actions</span>: {
<span id="line295" class="lineno">295</span>                <span class="hljs-attr">reload</span>: <span class="hljs-string">&#x27;Reload page&#x27;</span>
<span id="line296" class="lineno">296</span>            }
<span id="line297" class="lineno">297</span>        });
<span id="line298" class="lineno">298</span>    }
<span id="line299" class="lineno">299</span>});
<span id="line300" class="lineno">300</span>
<span id="line301" class="lineno">301</span><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(warning, {
<span id="line302" class="lineno">302</span>    <span class="hljs-comment">/**
<span id="line303" class="lineno">303</span>     * Displays an object removal warning, similar to `confirm()`. This is
<span id="line304" class="lineno">304</span>     * a simplified preset that uses the generic `warning` function.
<span id="line305" class="lineno">305</span>     *
<span id="line306" class="lineno">306</span>     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} type the object type (e.g. &quot;connection&quot;)
<span id="line307" class="lineno">307</span>     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} id the object name or id
<span id="line308" class="lineno">308</span>     * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Promise</span>} a promise that resolves when confirmed, or
<span id="line309" class="lineno">309</span>     *                   rejects if cancelled
<span id="line310" class="lineno">310</span>     * <span class="hljs-doctag">@function</span> RapidContext.UI.Msg.warning:remove
<span id="line311" class="lineno">311</span>     *
<span id="line312" class="lineno">312</span>     * <span class="hljs-doctag">@example</span>
<span id="line313" class="lineno">313</span>     * try {
<span id="line314" class="lineno">314</span>     *     await RapidContext.UI.Msg.warning.remove(&quot;person&quot;, &quot;123&quot;);
<span id="line315" class="lineno">315</span>     *     ...
<span id="line316" class="lineno">316</span>     * } catch (e) {
<span id="line317" class="lineno">317</span>     *     // cancelled
<span id="line318" class="lineno">318</span>     * }
<span id="line319" class="lineno">319</span>     */</span>
<span id="line320" class="lineno">320</span>    <span class="hljs-title function_">remove</span>(<span class="hljs-params">type, id</span>) {
<span id="line321" class="lineno">321</span>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">warning</span>({
<span id="line322" class="lineno">322</span>            <span class="hljs-attr">title</span>: <span class="hljs-string">`Remove <span class="hljs-subst">${type}</span>`</span>,
<span id="line323" class="lineno">323</span>            <span class="hljs-attr">html</span>: <span class="hljs-string">`Do you really want to remove the <span class="hljs-subst">${type}</span> &lt;code&gt;<span class="hljs-subst">${id}</span>&lt;/code&gt;?`</span>,
<span id="line324" class="lineno">324</span>            <span class="hljs-attr">actions</span>: {
<span id="line325" class="lineno">325</span>                <span class="hljs-attr">cancel</span>: <span class="hljs-string">&#x27;Cancel&#x27;</span>,
<span id="line326" class="lineno">326</span>                <span class="hljs-attr">warning</span>: {
<span id="line327" class="lineno">327</span>                    <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;fa fa-lg fa-minus-circle&#x27;</span>,
<span id="line328" class="lineno">328</span>                    <span class="hljs-attr">text</span>: <span class="hljs-string">`Yes, remove <span class="hljs-subst">${type}</span>`</span>
<span id="line329" class="lineno">329</span>                }
<span id="line330" class="lineno">330</span>            }
<span id="line331" class="lineno">331</span>        });
<span id="line332" class="lineno">332</span>    }
<span id="line333" class="lineno">333</span>});
<span id="line334" class="lineno">334</span>
<span id="line335" class="lineno">335</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> { error, warning, success, info };
<span id="line336" class="lineno">336</span></code></pre>
        </article>
    </section>





      </div>
    </section>

    <section class="footer center fineprint">
      <hr>
      Copyright &copy; 2007-2025 Per Cederberg. All rights reserved.
    </section>

  </body>
</html>
