
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="JsDoc" />
    <link rel="stylesheet" href="../css/style.css" type="text/css">
    <link rel="stylesheet" href="../css/doc.css" type="text/css">
    <link rel="stylesheet" href="../css/font-awesome-4.7.0.min.css" type="text/css">
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../images/logotype-icon.ico">
    <link rel="icon" type="image/png" sizes="256x256" href="../images/logotype-icon-256x256.png">
    <link rel="apple-touch-icon" sizes="256x256" href="../images/logotype-icon-256x256.png">
    <title>RapidContext :: JavaScript API</title>
  </head>
  <body class="doc">

    <section class="header">
      <div class="center">
        <a href="https://www.rapidcontext.com/" class="logotype">
          <img src="../images/logotype.png" />
        </a>
        <div class="text">
          <a href="https://www.rapidcontext.com/">
            <span style="font-size: 3.6em;">RapidContext</span><br>
            <span style="font-size: 1.75em; color: #caf3ff;">Access &#183; Discovery &#183; Insight</span><br>
            <span style="font-size: 1.3em; letter-spacing: 0.34em; line-height: 1.8em;">www.rapidcontext.com</span>
          </a>
        </div>
      </div>
      <div class="menu">
        <a href="https://www.rapidcontext.com/doc/index.html">Docs</a>
        &bull; <a href="https://github.com/cederberg/rapidcontext/releases">Downloads</a>
        &bull; <a href="https://github.com/cederberg/rapidcontext">Project</a>
      </div>
    </section>

    <section class="content center">
      <ol class="breadcrumb">
        <li><a href="../index.html">Documentation</a></li>

        <li><a href="index.html">JavaScript API</a></li>
        <li class="active">RapidContext_Widget_TextField.js</li>

      </ol>

      <div class="jsdoc">
        <h1 class="classTitle">Source RapidContext_Widget_TextField.js</h1>




    <section>
        <article>
            <pre><code class="hljs language-js"><span id="line1" class="lineno">1</span><span class="hljs-comment">/*
<span id="line2" class="lineno">2</span> * RapidContext &lt;https://www.rapidcontext.com/&gt;
<span id="line3" class="lineno">3</span> * Copyright (c) 2007-2024 Per Cederberg. All rights reserved.
<span id="line4" class="lineno">4</span> *
<span id="line5" class="lineno">5</span> * This program is free software: you can redistribute it and/or
<span id="line6" class="lineno">6</span> * modify it under the terms of the BSD license.
<span id="line7" class="lineno">7</span> *
<span id="line8" class="lineno">8</span> * This program is distributed in the hope that it will be useful,
<span id="line9" class="lineno">9</span> * but WITHOUT ANY WARRANTY; without even the implied warranty of
<span id="line10" class="lineno">10</span> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
<span id="line11" class="lineno">11</span> *
<span id="line12" class="lineno">12</span> * See the RapidContext LICENSE for more details.
<span id="line13" class="lineno">13</span> */</span>
<span id="line14" class="lineno">14</span>
<span id="line15" class="lineno">15</span><span class="hljs-comment">// Namespace initialization</span>
<span id="line16" class="lineno">16</span><span class="hljs-keyword">if</span> (<span class="hljs-title function_">typeof</span>(<span class="hljs-title class_">RapidContext</span>) == <span class="hljs-string">&quot;undefined&quot;</span>) {
<span id="line17" class="lineno">17</span>    <span class="hljs-title class_">RapidContext</span> = {};
<span id="line18" class="lineno">18</span>}
<span id="line19" class="lineno">19</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span> = <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span> || { <span class="hljs-title class_">Classes</span>: {} };
<span id="line20" class="lineno">20</span>
<span id="line21" class="lineno">21</span><span class="hljs-comment">/**
<span id="line22" class="lineno">22</span> * Creates a new text field widget.
<span id="line23" class="lineno">23</span> *
<span id="line24" class="lineno">24</span> * <span class="hljs-doctag">@constructor</span>
<span id="line25" class="lineno">25</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} attrs the widget and node attributes
<span id="line26" class="lineno">26</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [attrs.name] the form field name
<span id="line27" class="lineno">27</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [attrs.value] the field value, defaults to &quot;&quot;
<span id="line28" class="lineno">28</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [attrs.helpText] the help text when empty (deprecated)
<span id="line29" class="lineno">29</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} [attrs.disabled] the disabled widget flag, defaults to
<span id="line30" class="lineno">30</span> *            false
<span id="line31" class="lineno">31</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} [attrs.hidden] the hidden widget flag, defaults to false
<span id="line32" class="lineno">32</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">...(string|Node)</span>} [value] the initial text content
<span id="line33" class="lineno">33</span> *
<span id="line34" class="lineno">34</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Widget</span>} the widget DOM node
<span id="line35" class="lineno">35</span> *
<span id="line36" class="lineno">36</span> * <span class="hljs-doctag">@class</span> The text field widget class. Used to provide a text input field for a
<span id="line37" class="lineno">37</span> *     single line, using the `&lt;input&gt;` HTML element.
<span id="line38" class="lineno">38</span> * <span class="hljs-doctag">@property</span> {<span class="hljs-type">boolean</span>} disabled The read-only widget disabled flag.
<span id="line39" class="lineno">39</span> * <span class="hljs-doctag">@property</span> {<span class="hljs-type">string</span>} defaultValue The value to use on form reset.
<span id="line40" class="lineno">40</span> * <span class="hljs-doctag">@extends</span> RapidContext.Widget
<span id="line41" class="lineno">41</span> *
<span id="line42" class="lineno">42</span> * <span class="hljs-doctag">@example</span> &lt;caption&gt;JavaScript&lt;/caption&gt;
<span id="line43" class="lineno">43</span> * var attrs = { name: &quot;name&quot;, placeholder: &quot;Your Name Here&quot; };
<span id="line44" class="lineno">44</span> * var field = RapidContext.Widget.TextField(attrs);
<span id="line45" class="lineno">45</span> *
<span id="line46" class="lineno">46</span> * <span class="hljs-doctag">@example</span> &lt;caption&gt;User Interface XML&lt;/caption&gt;
<span id="line47" class="lineno">47</span> * &lt;TextField name=&quot;name&quot; placeholder=&quot;Your Name Here&quot; /&gt;
<span id="line48" class="lineno">48</span> */</span>
<span id="line49" class="lineno">49</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">TextField</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">attrs<span class="hljs-comment">/*, ...*/</span></span>) {
<span id="line50" class="lineno">50</span>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">scrape</span>(<span class="hljs-params">val</span>) {
<span id="line51" class="lineno">51</span>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>(val &amp;&amp; val.<span class="hljs-property">textContent</span> || val || <span class="hljs-string">&quot;&quot;</span>);
<span id="line52" class="lineno">52</span>    }
<span id="line53" class="lineno">53</span>    <span class="hljs-keyword">var</span> type = (attrs &amp;&amp; attrs.<span class="hljs-property">type</span>) || <span class="hljs-string">&quot;text&quot;</span>;
<span id="line54" class="lineno">54</span>    <span class="hljs-keyword">var</span> text = (attrs &amp;&amp; attrs.<span class="hljs-property">value</span>) || <span class="hljs-string">&quot;&quot;</span>;
<span id="line55" class="lineno">55</span>    text += <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">arguments</span>).<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">map</span>(scrape).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;&quot;</span>);
<span id="line56" class="lineno">56</span>    <span class="hljs-keyword">var</span> o = <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">UI</span>.<span class="hljs-title function_">INPUT</span>({
<span id="line57" class="lineno">57</span>        <span class="hljs-attr">autocapitalize</span>: <span class="hljs-string">&quot;off&quot;</span>,
<span id="line58" class="lineno">58</span>        <span class="hljs-attr">autocorrect</span>: <span class="hljs-string">&quot;off&quot;</span>,
<span id="line59" class="lineno">59</span>        <span class="hljs-attr">spellcheck</span>: <span class="hljs-string">&quot;off&quot;</span>,
<span id="line60" class="lineno">60</span>        <span class="hljs-attr">type</span>: type,
<span id="line61" class="lineno">61</span>        <span class="hljs-attr">value</span>: text,
<span id="line62" class="lineno">62</span>    });
<span id="line63" class="lineno">63</span>    <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-title function_">_widgetMixin</span>(o, <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">TextField</span>);
<span id="line64" class="lineno">64</span>    o.<span class="hljs-title function_">addClass</span>(<span class="hljs-string">&quot;widgetTextField&quot;</span>);
<span id="line65" class="lineno">65</span>    o.<span class="hljs-title function_">setAttrs</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, attrs, { <span class="hljs-attr">value</span>: text }));
<span id="line66" class="lineno">66</span>    o.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;input&quot;</span>, o.<span class="hljs-property">_handleChange</span>);
<span id="line67" class="lineno">67</span>    <span class="hljs-keyword">return</span> o;
<span id="line68" class="lineno">68</span>};
<span id="line69" class="lineno">69</span>
<span id="line70" class="lineno">70</span><span class="hljs-comment">// Register widget class</span>
<span id="line71" class="lineno">71</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">Classes</span>.<span class="hljs-property">TextField</span> = <span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">TextField</span>;
<span id="line72" class="lineno">72</span>
<span id="line73" class="lineno">73</span><span class="hljs-comment">/**
<span id="line74" class="lineno">74</span> * Emitted when the text is modified. This event is triggered by either
<span id="line75" class="lineno">75</span> * user events (keypress, paste, cut, blur) or by setting the value via
<span id="line76" class="lineno">76</span> * setAttrs(). The DOM standard onchange event has no &#x27;event.detail&#x27;
<span id="line77" class="lineno">77</span> * data and is triggered on blur. The synthetic onchange events all
<span id="line78" class="lineno">78</span> * contain an &#x27;event.detail&#x27; object with &#x27;before&#x27;, &#x27;after&#x27; and &#x27;cause&#x27;
<span id="line79" class="lineno">79</span> * properties.
<span id="line80" class="lineno">80</span> *
<span id="line81" class="lineno">81</span> * <span class="hljs-doctag">@name</span> RapidContext.Widget.TextField#onchange
<span id="line82" class="lineno">82</span> * <span class="hljs-doctag">@event</span>
<span id="line83" class="lineno">83</span> */</span>
<span id="line84" class="lineno">84</span>
<span id="line85" class="lineno">85</span><span class="hljs-comment">/**
<span id="line86" class="lineno">86</span> * Updates the widget or HTML DOM node attributes.
<span id="line87" class="lineno">87</span> *
<span id="line88" class="lineno">88</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} attrs the widget and node attributes to set
<span id="line89" class="lineno">89</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [attrs.name] the form field name
<span id="line90" class="lineno">90</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [attrs.value] the field value
<span id="line91" class="lineno">91</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [attrs.helpText] the help text when empty (deprecated)
<span id="line92" class="lineno">92</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} [attrs.disabled] the disabled widget flag
<span id="line93" class="lineno">93</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} [attrs.hidden] the hidden widget flag
<span id="line94" class="lineno">94</span> */</span>
<span id="line95" class="lineno">95</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">TextField</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">setAttrs</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">attrs</span>) {
<span id="line96" class="lineno">96</span>    attrs = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, attrs);
<span id="line97" class="lineno">97</span>    <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;helpText&quot;</span> <span class="hljs-keyword">in</span> attrs) {
<span id="line98" class="lineno">98</span>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;deprecated: setting &#x27;helpText&#x27; attribute, use &#x27;placeholder&#x27; instead&quot;</span>);
<span id="line99" class="lineno">99</span>        attrs.<span class="hljs-property">placeholder</span> = attrs.<span class="hljs-property">placeholder</span> || attrs.<span class="hljs-property">helpText</span>;
<span id="line100" class="lineno">100</span>        <span class="hljs-keyword">delete</span> attrs.<span class="hljs-property">helpText</span>;
<span id="line101" class="lineno">101</span>    }
<span id="line102" class="lineno">102</span>    <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;value&quot;</span> <span class="hljs-keyword">in</span> attrs) {
<span id="line103" class="lineno">103</span>        <span class="hljs-comment">// <span class="hljs-doctag">FIXME:</span> This is wrong, since we&#x27;re setting an attribute here.</span>
<span id="line104" class="lineno">104</span>        <span class="hljs-comment">// But until Form.update() has some other way to set a field</span>
<span id="line105" class="lineno">105</span>        <span class="hljs-comment">// value and trigger changes, this will remain.</span>
<span id="line106" class="lineno">106</span>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = attrs.<span class="hljs-property">value</span> || <span class="hljs-string">&quot;&quot;</span>;
<span id="line107" class="lineno">107</span>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_handleChange</span>(<span class="hljs-literal">null</span>);
<span id="line108" class="lineno">108</span>        <span class="hljs-keyword">delete</span> attrs.<span class="hljs-property">value</span>;
<span id="line109" class="lineno">109</span>    }
<span id="line110" class="lineno">110</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">__setAttrs</span>(attrs);
<span id="line111" class="lineno">111</span>};
<span id="line112" class="lineno">112</span>
<span id="line113" class="lineno">113</span><span class="hljs-comment">/**
<span id="line114" class="lineno">114</span> * Resets the text area form value to the initial value.
<span id="line115" class="lineno">115</span> */</span>
<span id="line116" class="lineno">116</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">TextField</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">reset</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line117" class="lineno">117</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setAttrs</span>({ <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultValue</span> });
<span id="line118" class="lineno">118</span>};
<span id="line119" class="lineno">119</span>
<span id="line120" class="lineno">120</span><span class="hljs-comment">/**
<span id="line121" class="lineno">121</span> * Returns the text field value.
<span id="line122" class="lineno">122</span> *
<span id="line123" class="lineno">123</span> * <span class="hljs-doctag">@return</span> {<span class="hljs-type">string</span>} the field value
<span id="line124" class="lineno">124</span> */</span>
<span id="line125" class="lineno">125</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">TextField</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getValue</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
<span id="line126" class="lineno">126</span>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
<span id="line127" class="lineno">127</span>};
<span id="line128" class="lineno">128</span>
<span id="line129" class="lineno">129</span><span class="hljs-comment">/**
<span id="line130" class="lineno">130</span> * Handles input events for this this widget.
<span id="line131" class="lineno">131</span> *
<span id="line132" class="lineno">132</span> * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Event</span>} [evt] the DOM Event object or null for manual
<span id="line133" class="lineno">133</span> */</span>
<span id="line134" class="lineno">134</span><span class="hljs-title class_">RapidContext</span>.<span class="hljs-property">Widget</span>.<span class="hljs-property">TextField</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">_handleChange</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) {
<span id="line135" class="lineno">135</span>    <span class="hljs-keyword">var</span> cause = (evt &amp;&amp; evt.<span class="hljs-property">inputType</span>) || <span class="hljs-string">&quot;set&quot;</span>;
<span id="line136" class="lineno">136</span>    <span class="hljs-keyword">var</span> detail = { <span class="hljs-attr">before</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">storedValue</span> || <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-attr">after</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>, <span class="hljs-attr">cause</span>: cause };
<span id="line137" class="lineno">137</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&quot;change&quot;</span>, { <span class="hljs-attr">detail</span>: detail, <span class="hljs-attr">bubbles</span>: <span class="hljs-literal">true</span> });
<span id="line138" class="lineno">138</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">storedValue</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
<span id="line139" class="lineno">139</span>};
<span id="line140" class="lineno">140</span></code></pre>
        </article>
    </section>





      </div>
    </section>

    <section class="footer center fineprint">
      <hr>
      Copyright &copy; 2007-2024 Per Cederberg. All rights reserved.
    </section>

  </body>
</html>
