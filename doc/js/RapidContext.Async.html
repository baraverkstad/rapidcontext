<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="JsDoc Toolkit" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="../css/style.css" type="text/css">
    <link rel="stylesheet" href="../css/doc.css" type="text/css">
    <link rel="stylesheet" href="../css/font-awesome-4.7.0.min.css" type="text/css">
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../images/logotype-icon.ico">
    <link rel="icon" type="image/png" sizes="256x256" href="../images/logotype-icon-256x256.png">
    <link rel="apple-touch-icon" sizes="256x256" href="../images/logotype-icon-256x256.png">
    <title>RapidContext :: RapidContext.Async</title>
  </head>
  <body class="doc">
        <section class="header">
      <div class="center">
        <a href="https://www.rapidcontext.com/" class="logotype">
          <img src="../images/logotype.png" />
        </a>
        <div class="text">
          <a href="https://www.rapidcontext.com/">
            <span style="font-size: 3.6em;">RapidContext</span><br>
            <span style="font-size: 1.75em; color: #caf3ff;">Access &#183; Discovery &#183; Insight</span><br>
            <span style="font-size: 1.3em; letter-spacing: 0.34em; line-height: 1.8em;">www.rapidcontext.com</span>
          </a>
        </div>
      </div>
      <div class="menu">
        <a href="https://www.rapidcontext.com/doc/index.html">Docs</a>
        &bull; <a href="https://github.com/cederberg/rapidcontext/releases">Downloads</a>
        &bull; <a href="https://github.com/cederberg/rapidcontext">Project</a>
      </div>
    </section>
    <section class="content center">


<ol class="breadcrumb">
  <li><a href="../index.html">Documentation</a></li>
  <li><a href="index.html">JavaScript API</a></li>
  <li class="active">RapidContext.Async</li>
</ol>

<!--START-->

<!-- ============================== class title ============================ -->
            <h1 class="classTitle">

                Class RapidContext.Async
            </h1>

<!-- ============================== class summary ========================== -->
            <p class="description">


                A cancellable Promise that is backwards-compatible with
<var>MochiKit.Async.Deferred</var>. These promises can be used either as a deferred
or as a normal promise (recommended).<br/><br/>Instances of this class are <var>instanceof MochiKit.Async.Deferred</var> (and
NOT <var>instanceof Promise</var>) due to backwards compatibility. Use
<var>RapidContext.Async.isPromise</var> to check for a promise-compatible API.

                <br/><br/>


                    <i>Source code:</i>
                    <a href="src/RapidContext_Async.js.html">RapidContext_Async.js</a>

            </p>

<!-- ============================== constructor summary ==================== -->

            <table class="summaryTable">
                <caption>Class Summary</caption>
                <tbody>
                    <tr>
                        <td class="attributes">&nbsp;</td>
                        <td class="nameDescription" >
                            <div class="fixedFont">
                                <b><a href="RapidContext.Async.html#constructor">RapidContext.Async</a></b>(promise, onCancelled)
                            </div>
                            <div class="description">Creates a new cancellable promise.</div>
                        </td>
                    </tr>
                </tbody>
            </table>


<!-- ============================== properties summary ===================== -->


<!-- ============================== methods summary ======================== -->




                <table class="summaryTable">
                    <caption>Method Summary</caption>
                    <tbody>

                        <tr>
                            <td class="attributes">&nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" style="text-decoration: line-through;"><b><a href="RapidContext.Async.html#addBoth">addBoth</a></b>(callback)
                                </div>
                                <div class="description">Registers a callback function to this promise.</div>
                            </td>
                        </tr>

                        <tr>
                            <td class="attributes">&nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" style="text-decoration: line-through;"><b><a href="RapidContext.Async.html#addCallback">addCallback</a></b>(callback)
                                </div>
                                <div class="description">Registers a fulfilled callback function to this promise.</div>
                            </td>
                        </tr>

                        <tr>
                            <td class="attributes">&nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" style="text-decoration: line-through;"><b><a href="RapidContext.Async.html#addCallbacks">addCallbacks</a></b>(onFulfilled, onRejected)
                                </div>
                                <div class="description">Registers one or two callback functions to this promise.</div>
                            </td>
                        </tr>

                        <tr>
                            <td class="attributes">&nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" style="text-decoration: line-through;"><b><a href="RapidContext.Async.html#addErrback">addErrback</a></b>(errback)
                                </div>
                                <div class="description">Registers a reject callback function to this promise.</div>
                            </td>
                        </tr>

                        <tr>
                            <td class="attributes">&nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" ><b><a href="RapidContext.Async.html#cancel">cancel</a></b>()
                                </div>
                                <div class="description">Cancels this promise and calls the registered cancellation handler.</div>
                            </td>
                        </tr>

                        <tr>
                            <td class="attributes">&nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" ><b><a href="RapidContext.Async.html#catch">catch</a></b>(onRejected)
                                </div>
                                <div class="description">Registers a reject callback function to this promise.</div>
                            </td>
                        </tr>

                        <tr>
                            <td class="attributes">&lt;static&gt; &nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" >RapidContext.Async.<b><a href="RapidContext.Async.html#.css">css</a></b>(url)
                                </div>
                                <div class="description">Injects a CSS stylesheet to the current page.</div>
                            </td>
                        </tr>

                        <tr>
                            <td class="attributes">&nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" ><b><a href="RapidContext.Async.html#finally">finally</a></b>(onFinally)
                                </div>
                                <div class="description">Registers a finalizer callback function to this promise.</div>
                            </td>
                        </tr>

                        <tr>
                            <td class="attributes">&lt;static&gt; &nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" >RapidContext.Async.<b><a href="RapidContext.Async.html#.img">img</a></b>(url)
                                </div>
                                <div class="description">Loads an image from a URL.</div>
                            </td>
                        </tr>

                        <tr>
                            <td class="attributes">&lt;static&gt; &nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" >RapidContext.Async.<b><a href="RapidContext.Async.html#.isPromise">isPromise</a></b>(value)
                                </div>
                                <div class="description">Checks if an object conforms to the <var>Promise</var> API.</div>
                            </td>
                        </tr>

                        <tr>
                            <td class="attributes">&lt;static&gt; &nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" >RapidContext.Async.<b><a href="RapidContext.Async.html#.script">script</a></b>(url)
                                </div>
                                <div class="description">Injects a JavaScript to the current page.</div>
                            </td>
                        </tr>

                        <tr>
                            <td class="attributes">&nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" ><b><a href="RapidContext.Async.html#then">then</a></b>(onFulfilled, onRejected)
                                </div>
                                <div class="description">Registers one or two callback functions to this promise.</div>
                            </td>
                        </tr>

                        <tr>
                            <td class="attributes">&lt;static&gt; &nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" >RapidContext.Async.<b><a href="RapidContext.Async.html#.wait">wait</a></b>(millis, value)
                                </div>
                                <div class="description">Returns a delayed value.</div>
                            </td>
                        </tr>

                        <tr>
                            <td class="attributes">&lt;static&gt; &nbsp;</td>
                            <td class="nameDescription">
                                <div class="fixedFont" >RapidContext.Async.<b><a href="RapidContext.Async.html#.xhr">xhr</a></b>(url, options)
                                </div>
                                <div class="description">Performs an XmlHttpRequest to a URL.</div>
                            </td>
                        </tr>

                    </tbody>
                </table>




<!-- ============================== events summary ======================== -->


<!-- ============================== constructor details ==================== -->

            <div id="constructor" class="details">
                <div class="sectionTitle">
                    Class Detail
                </div>

                <div class="fixedFont">
                        <b>RapidContext.Async</b>(promise, onCancelled)
                </div>

                <div class="description">
                    Creates a new cancellable promise. The cancellation callback must be a
no-op if the action is already performed.

                </div>





                        <dl class="detailList">
                        <dt class="heading">Parameters:</dt>

                            <dt>
                                <span class="light fixedFont">{Promise/Deferred/Function/Error/Object}</span>  <b>promise</b>

                            </dt>
                                <dd>the promise to wrap</dd>

                            <dt>
                                <span class="light fixedFont">{Function}</span>  <b>onCancelled</b>
                                <i>Optional</i>
                            </dt>
                                <dd>the cancellation callback function</dd>

                        </dl>








            </div>


<!-- ============================== field details ========================== -->


<!-- ============================== method details ========================= -->

                <div class="sectionTitle">
                    Method Detail
                </div>

                    <div id=".isPromise" class="fixedFont">&lt;static&gt;

                    <span class="light">{Boolean}</span>
                    <span class="light">RapidContext.Async.</span><b>isPromise</b>(value)

                    </div>
                    <div class="description">
                        Checks if an object conforms to the <var>Promise</var> API.


                    </div>




                            <dl class="detailList">
                            <dt class="heading">Parameters:</dt>

                                <dt>
                                    <span class="light fixedFont">{Object}</span> <b>value</b>

                                </dt>
                                <dd>the object to check</dd>

                            </dl>





                            <dl class="detailList">
                            <dt class="heading">Returns:</dt>

                                <dd><span class="light fixedFont">{Boolean}</span> <var>true</var> if the object is a promise, or <var>false</var> otherwise</dd>

                            </dl>




                    <hr />

                    <div id="then" class="fixedFont">

                    <span class="light">{Async}</span>
                    <b>then</b>(onFulfilled, onRejected)

                    </div>
                    <div class="description">
                        Registers one or two callback functions to this promise.


                    </div>




                            <dl class="detailList">
                            <dt class="heading">Parameters:</dt>

                                <dt>
                                    <span class="light fixedFont">{Function}</span> <b>onFulfilled</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>a callback if promise fulfilled</dd>

                                <dt>
                                    <span class="light fixedFont">{Function}</span> <b>onRejected</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>a callback if promise rejected</dd>

                            </dl>





                            <dl class="detailList">
                            <dt class="heading">Returns:</dt>

                                <dd><span class="light fixedFont">{Async}</span> a new promise that resolves to whatever value the
    callback functions return</dd>

                            </dl>




                    <hr />

                    <div id="catch" class="fixedFont">

                    <span class="light">{Async}</span>
                    <b>catch</b>(onRejected)

                    </div>
                    <div class="description">
                        Registers a reject callback function to this promise.


                    </div>




                            <dl class="detailList">
                            <dt class="heading">Parameters:</dt>

                                <dt>
                                    <span class="light fixedFont">{Function}</span> <b>onRejected</b>

                                </dt>
                                <dd>a callback if promise rejected</dd>

                            </dl>





                            <dl class="detailList">
                            <dt class="heading">Returns:</dt>

                                <dd><span class="light fixedFont">{Async}</span> a new promise that resolves to whatever value the
    callback function returned</dd>

                            </dl>




                    <hr />

                    <div id="finally" class="fixedFont">

                    <span class="light">{Async}</span>
                    <b>finally</b>(onFinally)

                    </div>
                    <div class="description">
                        Registers a finalizer callback function to this promise. Note that
the finalizer MAY NOT BE CALLED if the promise is cancelled.


                    </div>




                            <dl class="detailList">
                            <dt class="heading">Parameters:</dt>

                                <dt>
                                    <span class="light fixedFont">{Function}</span> <b>onFinally</b>

                                </dt>
                                <dd>a callback for promise resolved</dd>

                            </dl>





                            <dl class="detailList">
                            <dt class="heading">Returns:</dt>

                                <dd><span class="light fixedFont">{Async}</span> a new promise</dd>

                            </dl>




                    <hr />

                    <div id="cancel" class="fixedFont">


                    <b>cancel</b>()

                    </div>
                    <div class="description">
                        Cancels this promise and calls the registered cancellation handler.
No other callbacks will be triggered after the promise has been
cancelled (except finalizer).


                    </div>











                    <hr />

                    <div id="addCallbacks" class="fixedFont">

                    <span class="light">{Async}</span>
                    <b>addCallbacks</b>(onFulfilled, onRejected)

                    </div>
                    <div class="description">
                        Registers one or two callback functions to this promise.


                    </div>




                            <dl class="detailList">
                            <dt class="heading">Parameters:</dt>

                                <dt>
                                    <span class="light fixedFont">{Function}</span> <b>onFulfilled</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>a callback if promise fulfilled</dd>

                                <dt>
                                    <span class="light fixedFont">{Function}</span> <b>onRejected</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>a callback if promise rejected</dd>

                            </dl>


                            <dl class="detailList">
                            <dt class="heading">Deprecated:</dt>
                            <dt>
                                Provided for <var>MochiKit.Async.Deferred</var> compatibility
                            </dt>
                            </dl>




                            <dl class="detailList">
                            <dt class="heading">Returns:</dt>

                                <dd><span class="light fixedFont">{Async}</span> this same promise</dd>

                            </dl>




                    <hr />

                    <div id="addCallback" class="fixedFont">

                    <span class="light">{Async}</span>
                    <b>addCallback</b>(callback)

                    </div>
                    <div class="description">
                        Registers a fulfilled callback function to this promise.


                    </div>




                            <dl class="detailList">
                            <dt class="heading">Parameters:</dt>

                                <dt>
                                    <span class="light fixedFont">{Function}</span> <b>callback</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>a callback if promise fulfilled</dd>

                            </dl>


                            <dl class="detailList">
                            <dt class="heading">Deprecated:</dt>
                            <dt>
                                Provided for <var>MochiKit.Async.Deferred</var> compatibility
                            </dt>
                            </dl>




                            <dl class="detailList">
                            <dt class="heading">Returns:</dt>

                                <dd><span class="light fixedFont">{Async}</span> this same promise</dd>

                            </dl>




                    <hr />

                    <div id="addErrback" class="fixedFont">

                    <span class="light">{Async}</span>
                    <b>addErrback</b>(errback)

                    </div>
                    <div class="description">
                        Registers a reject callback function to this promise.


                    </div>




                            <dl class="detailList">
                            <dt class="heading">Parameters:</dt>

                                <dt>
                                    <span class="light fixedFont">{Function}</span> <b>errback</b>

                                </dt>
                                <dd>a callback if promise rejected</dd>

                            </dl>


                            <dl class="detailList">
                            <dt class="heading">Deprecated:</dt>
                            <dt>
                                Provided for <var>MochiKit.Async.Deferred</var> compatibility
                            </dt>
                            </dl>




                            <dl class="detailList">
                            <dt class="heading">Returns:</dt>

                                <dd><span class="light fixedFont">{Async}</span> this same promise</dd>

                            </dl>




                    <hr />

                    <div id="addBoth" class="fixedFont">

                    <span class="light">{Async}</span>
                    <b>addBoth</b>(callback)

                    </div>
                    <div class="description">
                        Registers a callback function to this promise.


                    </div>




                            <dl class="detailList">
                            <dt class="heading">Parameters:</dt>

                                <dt>
                                    <span class="light fixedFont">{Function}</span> <b>callback</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>a callback if promise either fulfilled
       or rejected</dd>

                            </dl>


                            <dl class="detailList">
                            <dt class="heading">Deprecated:</dt>
                            <dt>
                                Provided for <var>MochiKit.Async.Deferred</var> compatibility
                            </dt>
                            </dl>




                            <dl class="detailList">
                            <dt class="heading">Returns:</dt>

                                <dd><span class="light fixedFont">{Async}</span> this same promise</dd>

                            </dl>




                    <hr />

                    <div id=".wait" class="fixedFont">&lt;static&gt;

                    <span class="light">{Async}</span>
                    <span class="light">RapidContext.Async.</span><b>wait</b>(millis, value)

                    </div>
                    <div class="description">
                        Returns a delayed value.


                    </div>




                            <dl class="detailList">
                            <dt class="heading">Parameters:</dt>

                                <dt>
                                    <span class="light fixedFont">{Number}</span> <b>millis</b>

                                </dt>
                                <dd>the number of milliseconds to wait</dd>

                                <dt>
                                    <span class="light fixedFont">{Object}</span> <b>value</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>the value to resolve with</dd>

                            </dl>





                            <dl class="detailList">
                            <dt class="heading">Returns:</dt>

                                <dd><span class="light fixedFont">{Async}</span> a new promise that resolves with the value</dd>

                            </dl>




                    <hr />

                    <div id=".img" class="fixedFont">&lt;static&gt;

                    <span class="light">{Async}</span>
                    <span class="light">RapidContext.Async.</span><b>img</b>(url)

                    </div>
                    <div class="description">
                        Loads an image from a URL.


                    </div>




                            <dl class="detailList">
                            <dt class="heading">Parameters:</dt>

                                <dt>
                                    <span class="light fixedFont">{String}</span> <b>url</b>

                                </dt>
                                <dd>the image URL to load</dd>

                            </dl>





                            <dl class="detailList">
                            <dt class="heading">Returns:</dt>

                                <dd><span class="light fixedFont">{Async}</span> a promise that resolves with the DOM <var>&lt;img&gt;</var> element</dd>

                            </dl>




                    <hr />

                    <div id=".css" class="fixedFont">&lt;static&gt;

                    <span class="light">{Async}</span>
                    <span class="light">RapidContext.Async.</span><b>css</b>(url)

                    </div>
                    <div class="description">
                        Injects a CSS stylesheet to the current page.


                    </div>




                            <dl class="detailList">
                            <dt class="heading">Parameters:</dt>

                                <dt>
                                    <span class="light fixedFont">{String}</span> <b>url</b>

                                </dt>
                                <dd>the stylesheet URL to load</dd>

                            </dl>





                            <dl class="detailList">
                            <dt class="heading">Returns:</dt>

                                <dd><span class="light fixedFont">{Async}</span> a promise that resolves with the DOM <var>&lt;link&gt;</var> element</dd>

                            </dl>




                    <hr />

                    <div id=".script" class="fixedFont">&lt;static&gt;

                    <span class="light">{Async}</span>
                    <span class="light">RapidContext.Async.</span><b>script</b>(url)

                    </div>
                    <div class="description">
                        Injects a JavaScript to the current page.


                    </div>




                            <dl class="detailList">
                            <dt class="heading">Parameters:</dt>

                                <dt>
                                    <span class="light fixedFont">{String}</span> <b>url</b>

                                </dt>
                                <dd>the script URL to load</dd>

                            </dl>





                            <dl class="detailList">
                            <dt class="heading">Returns:</dt>

                                <dd><span class="light fixedFont">{Async}</span> a promise that resolves with the DOM <var>&lt;script&gt;</var> element</dd>

                            </dl>




                    <hr />

                    <div id=".xhr" class="fixedFont">&lt;static&gt;

                    <span class="light">{Async}</span>
                    <span class="light">RapidContext.Async.</span><b>xhr</b>(url, options)

                    </div>
                    <div class="description">
                        Performs an XmlHttpRequest to a URL.


                    </div>




                            <dl class="detailList">
                            <dt class="heading">Parameters:</dt>

                                <dt>
                                    <span class="light fixedFont">{String}</span> <b>url</b>

                                </dt>
                                <dd>the URL to request</dd>

                                <dt>
                                    <span class="light fixedFont">{Object}</span> <b>options</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>the request options</dd>

                                <dt>
                                    <span class="light fixedFont">{String}</span> <b>options.method</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>the HTTP method (e.g. <var>GET</var>, <var>POST</var>...)</dd>

                                <dt>
                                    <span class="light fixedFont">{Object}</span> <b>options.headers</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>the HTTP headers to send</dd>

                                <dt>
                                    <span class="light fixedFont">{Number}</span> <b>options.timeout</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>the timeout in milliseconds (default is 30s)</dd>

                                <dt>
                                    <span class="light fixedFont">{String}</span> <b>options.log</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>the logging prefix, or <var>null</var> (defaults to <var>request</var>)</dd>

                                <dt>
                                    <span class="light fixedFont">{String}</span> <b>options.responseType</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>the expected HTTP response (e.g. <var>json</var>)</dd>

                                <dt>
                                    <span class="light fixedFont">{String}</span> <b>options.body</b>
                                    <i>Optional</i>
                                </dt>
                                <dd>the HTTP request body to send</dd>

                            </dl>





                            <dl class="detailList">
                            <dt class="heading">Returns:</dt>

                                <dd><span class="light fixedFont">{Async}</span> a new promise that resolves with either the XHR object,
    or an error if the request failed</dd>

                            </dl>








<!-- ============================== event details ========================= -->


    <!--END-->

    </section>
    <section class="footer center fineprint">
      <hr>
      Copyright &copy; 2007-2022 Per Cederberg. All rights reserved.
    </section>

  </body>
</html>
