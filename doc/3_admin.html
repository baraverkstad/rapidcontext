<!DOCTYPE html>

<html lang="en" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="icon" type="image/gif" href="images/favicon.png" />
    <link rel="stylesheet" href="css/style.css" type="text/css" />
    <link rel="stylesheet" href="css/widget.css" type="text/css" />
    <title>RapidContext :: Administration &amp; Security</title>
  </head>
  <body class="doc">

<div style="position: relative;">
  <img src="images/logotype.png" alt="RapidContext Logotype" style="width: 128px; height: 128px;" />
  <div style="position: absolute; top: 6px; left: 170px; font-family: Trebuchet MS;">
    <a href="http://www.rapidcontext.com/" target="_blank">
      <span style="font-size: 50px; color: #345;">RapidContext</span><br/>
      <span style="font-size: 24px; color: #88AACC;">Access &gt; Discovery &gt; Insight</span><br/>
      <span style="font-size: 18px; color: #666; letter-spacing: 6px; line-height: 24px;">www.rapidcontext.com</span><br/>
    </a>
  </div>
</div>

<table class="navigation widgetNavigationBar" style="margin: 20px 0;">
  <tr>
    <td class="prev"><a href="index.html">Documentation</a></td>
    <td class='prev-active'>&nbsp;</td>
    <td class='active'>Administration &amp; Security</td>
    <td class='active-end'>&nbsp;</td>
  </tr>
</table>

<!--START-->

<h1>3. Administration &amp; Security</h1>

<h2 id="storage">3.1. Storage &amp; Local Changes</h2>

<p>The RapidContext storage is located in the <var>plugin</var> subdirectory
on the server. There all installed plug-ins are saved as packed ZIP files
along with the special <var>local</var> directory.</p>

<p>The <var>local</var> directory contains the special <var>local</var> plug-in
that stores any local additions or modifications. These local changes always
have priority over other plug-ins. The figure below illustrates the server
storage file structure:</p>

<ul class="box yellow">
  <li>
    <var>plugin/</var>
    <ul>
      <li><var>cmdline.zip</var> &mdash; The command-line plug-in</li>
      <li><var>http.zip</var> &mdash; The HTTP plug-in</li>
      <li><var>jdbc.zip</var> &mdash; The JDBC plug-in</li>
      <li>
        <var>local/</var> &mdash; A plug-in with local modifications and additions
        <ul>
          <li><var>connection/</var> &mdash; Connections added or modified</li>
          <li><var>lib/</var> &mdash; JAR files added (JDBC drivers)</li>
          <li><var>role/</var> &mdash; Roles added or modified</li>
          <li><var>session/</var> &mdash; Currently active sessions</li>
          <li><var>user/</var> &mdash; Users added or modified</li>
        </ul>
      </li>
      <li><var>system.zip</var> &mdash; The system or core platform plug-in</li>
    </ul>
  </li>
</ul>


<h2 id="default_users">3.2. Default Users &amp; Roles</h2>

<p>The default installation of RapidContext contain the following users and
roles:</p>

<ul class="box yellow">
  <li><strong><var>admin</var> (user)</strong> &mdash; Created if no other
      users are detected on server startup. The password is initially set to
      accept any value (an empty string). The user is also assigned the
      <var>admin</var> role. It is good practice to either disable this user
      or assign it a proper password.</li>
  <li><strong><var>admin</var> (role)</strong> &mdash; A built-in role that
      provides full system access, everywhere. This role is required in order
      to modify procedures, manage plug-ins, and all similar administrative
      operations. This role <strong>shouldn't be modified or removed</strong>
      from the system. Instead, it should be assigned to users with care.</li>
</ul>


<h2 id="user_authentication">3.3. User Authentication</h2>

<p>RapidContext require all users to authenticate with user name and password.
The following protocols for user authentication are built-in and supported
by default:</p>

<ul class="box yellow">
  <li><strong>HTTP Digest Auth</strong> &mdash; Uses a browser built-in login
      dialog for user authentication. This method uses a challenge-response
      protocol that avoids sending the password over
      the wire. Even so, it is recommended to only use this authentication
      method over secure channels (intranet, VPN tunnel or HTTPS).</li>
</ul>

<p>After a successful authentication, a new session is initiated for the user.
The <var>sessionid</var> HTTP cookie is sent to the web browser and no further
authentication is required until the cookie expires or is invalidated. This
avoids repeated authentication requests.</p>

<div class="box green" style="margin-top: 0;">
  <img src="images/info.png" class="left" alt="Information" />
  <div style="margin-left: 68px;">
    <h2 style="margin: 0;">Notice</h2>
    <p>A user session can be invalidated in one of the following ways:</p>
    <ul>
      <li><strong>Session Expiry</strong> &mdash; Both the <var>sessionid</var>
          cookie and the session itself is set to expire after 30 days.</li>
      <li><strong>Logout</strong> &mdash; Users can logout from the user menu
          (top right in the standard user interface).</li>
      <li><strong>Forced Termination</strong> &mdash; The built-in procedure
          <var>System.Session.Terminate</var> allows the early termination of
          any user session.</li>
      <li><strong>IP or Browser Mismatch</strong> &mdash; A session is bound
          to the original browser user agent string and IP address in order to
          avoid session hijacking. Whenever a mismatch occurs, the session is
          terminated.</li>
    </ul>
  </div>
</div>


<h2 id="managing_users">3.4. Managing Users</h2>

<p>Users are managed with the built-in <strong>Admin</strong> app. Follow
the steps below in order to edit or create a user:</p>

<ol class="box yellow">
  <li>Launch or go to the <strong>Admin</strong> app</li>
  <li>Choose the <q>Users</q> tab</li>
  <li>Select the appropriate user <strong>OR</strong> press the <q>+</q>
      icon</li>
  <li>Edit the user form (see screenshot for <var>admin</var> user)
      <p class="figure">
        <img src="images/screenshot-user-edit.png" />
      </p></li>
  <li>Press <q>Save</q> to store the changes</li>
</ol>

<div class="box green" style="margin-top: 0;">
  <img src="images/info.png" class="left" alt="Information" />
  <div style="margin-left: 68px;">
    <h2 style="margin: 0;">Notice</h2>
    <p>A few facts regarding user data storage:</p>
    <ul>
      <li><strong>Passwords</strong> &mdash; Passwords are stored with a
          one-way MD5 hash (with salt). This makes them virtually impossible to
          retrieve without resorting to brute force and guesses. An
          administrator can of course reset user passwords as needed.</li>
      <li><strong>User Removal</strong> &ndash; Users can be removed by
          deleting the corresponding file from storage, but this is
          <strong>strongly discouraged</strong>. Use the
          <q>Enabled</q> checkbox in the dialog above instead.</li>
    </ul>
  </div>
</div>


<h2 id="roles_access_control">3.5. Roles &amp; Access Control</h2>

<p>Access permissions are assigned to users from the <strong>roles</strong>
assigned. All platform operations for managing plug-ins or editing procedures
require the <var>admin</var> role, but access to other procedures is possible
to attain also from other roles.</p>

<p>Roles are currently created and modified directly on the server file system,
in the <var>plugin/local/role</var> directory. The role files should be named
<var>[identifier].properties</var>. See below for an example role file.</p>

<pre class="box blue code">
<span class="comment"># General properties</span>
id = demo
type = role
name = Demo
description = Provides access to all read-only procedures (if properly named).

<span class="comment"># Access array</span>
access.0.type = procedure
access.0.regexp = .*\\.Find[^.]*
</pre>

<p>The configuration for the <var>access</var> array requires some further
elaboration:</p>

<ul class="box yellow">
  <li><var>access.#.type</var> &mdash; The object type to match. Only the
      <q><var>procedure</var></q> and <q><var>app</var></q> types are currently
      used by the default access controls. Use the format
      <var>[plug-in identifier]:[type]</var> for custom permission types and
      generic access controls.</li>
  <li><var>access.#.name</var> &mdash; The exact object identifier to match,
      i.e. the procedure name. Either this property or the <var>regexp</var>
      property must be specified. Use the <var>name</var> property when a
      single unique object is to be identified.</li>
  <li><var>access.#.regexp</var> &mdash; The regular expression to match the
      object identifier. Either this property or the <var>name</var> property
      must be specified. Note that the <q>.</q> character has special meaning
      in regular expressions, so it must be escaped as <q>\\.</q> to be used
      literally.</li>
  <li><var>access.#.caller</var> &mdash; The regular expression caller name
      to match. If this property is specified, the procedure will only be
      accessible when executed by the matched caller procedure. This is useful
      for limiting access to generic helper procedures.</li>
  <li><var>access.#.allow</var> &mdash; The access permission value, defaults
      to <var>true</var>. The permission access list is processed in order,
      so once an object matches an access list entry, the value of the
      <var>allow</var> property will be returned as the permission check
      result.</li>
</ul>

<div class="box green" style="margin-top: 0;">
  <img src="images/info.png" class="left" alt="Information" />
  <div style="margin-left: 68px;">
    <h2 style="margin: 0;">Notice</h2>
    <p>A few important notes on access control:</p>
    <ul>
      <li><strong>Admin</strong> &mdash; It is currently not possible to manage
          roles from the <strong>Admin</strong> app. This will change in a
          future release possibly along with much of the current access control
          model.</li>
      <li><strong>Generic Access Controls</strong> &mdash; Since only apps and
          procedures are checked by default, other objects must be checked
          programmatically (from JavaScript procedures) by using the
          <var>System.User.CheckAccess</var> procedure.</li>
    </ul>
  </div>
</div>


<h2 id="security_checklist">3.6. Security Checklist</h2>

<p>Before installing a RapidContext server in a publically acessible location,
please check the following:</p>

<ul class="box yellow">
  <li><strong>Disable Default User</strong> &ndash; Make sure that the
      <var>admin</var> user is either disabled or provided with a strong
      password.</li>
  <li><strong>User Passwords</strong> &ndash; Users should be encouraged to use
      strong passwords to avoid risks with brute-force attacks or password
      guessing.</li>
  <li><strong>Encrypt Connections</strong> &ndash; Communication over the
      Internet should be encrypted, since information can otherwise be
      eavesdropped. Use an HTTPS proxy, an HTTPS servlet container or a VPN
      tunnel.</li>
  <li><strong>Verify Access Controls</strong> &ndash; Test the access controls
      for each role with a test user assigned to only that role. Check that no
      privileged resources are available to unprivileged roles.</li>
  <li><strong>Limit Admin Access</strong> &ndash; The number of users with
      the <var>admin</var> role should be limited, to avoid potential abuse
      of the system.</li>
</ul>


<!--END-->

<div class="fineprint">
  <hr>
  Copyright &copy; 2007-2012 Per Cederberg. All rights reserved.
</div>

  </body>

</html>
