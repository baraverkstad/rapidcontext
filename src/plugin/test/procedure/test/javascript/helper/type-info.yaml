id: test/javascript/helper/type-info
type: procedure/javascript
description: Returns type metadata for an object.
binding:
  - name: code
    type: data
    value: |-
        function types(o) {
            let s = typeName(o);
            if (o === Object.prototype) {
                s = 'Object.prototype';
            } else if (o === Array.prototype) {
                s = 'Array.prototype';
            } else if (o === Boolean.prototype) {
                s = 'Boolean.prototype';
            } else if (o === Date.prototype) {
                s = 'Date.prototype';
            } else if (o === Error.prototype) {
                s = 'Error.prototype';
            } else if (o === Function.prototype) {
                s = 'Function.prototype';
            } else if (o === Number.prototype) {
                s = 'Number.prototype';
            } else if (o === String.prototype) {
                s = 'String.prototype';
            }
            let proto = (o != null) && Object.getPrototypeOf(o);
            return proto ? [s].concat(types(proto)) : [s];
        }

        return {
            name: typeName(obj),
            chain: types(obj).join(' \u21E2 '),
            isObject: obj instanceof Object,
            isArray: Array.isArray(obj) && obj instanceof Array
        };
  - name: typeName
    type: procedure
    value: test/javascript/helper/type-name
  - name: obj
    type: argument
    description: The object to check
